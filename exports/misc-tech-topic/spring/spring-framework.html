<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>spring-framework</title>
  <style>
    html {
      font-size: 12pt;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  \usepackage{listings}
  \usepackage{xcolor}

  \lstset{
      basicstyle=\ttfamily,
      backgroundcolor=\color{black!10},
      showspaces=false,
      showstringspaces=false,
      showtabs=false,
      tabsize=2,
      captionpos=b,
      breaklines=true,
      breakautoindent=true,
      linewidth=\textwidth
  }
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a>
<ul>
<li><a href="#document-prerequisites"
id="toc-document-prerequisites">Document Prerequisites</a></li>
<li><a href="#spring-and-spring-boot"
id="toc-spring-and-spring-boot">Spring and Spring boot</a></li>
</ul></li>
<li><a href="#modern-guidelines" id="toc-modern-guidelines">Modern
guidelines</a>
<ul>
<li><a href="#use-record-for-dtos" id="toc-use-record-for-dtos">1. Use
<code>record</code> for DTOs</a></li>
<li><a href="#prefer-var-for-local-variables-judiciously"
id="toc-prefer-var-for-local-variables-judiciously">2. Prefer
<code>var</code> for Local Variables (Judiciously)</a></li>
<li><a href="#replace-lombok-with-java-language-features"
id="toc-replace-lombok-with-java-language-features">3. Replace Lombok
with Java Language Features</a></li>
<li><a href="#sealed-classes-for-domain-models"
id="toc-sealed-classes-for-domain-models">4. Sealed Classes for Domain
Models</a></li>
<li><a href="#pattern-matching-instanceof-and-switch"
id="toc-pattern-matching-instanceof-and-switch">5. Pattern Matching
(<code>instanceof</code> and <code>switch</code>)</a></li>
<li><a href="#text-blocks-for-jsonhtmlsql"
id="toc-text-blocks-for-jsonhtmlsql">6. Text Blocks for
JSON/HTML/SQL</a></li>
<li><a href="#null-checks-with-objects.requirenonnullelse"
id="toc-null-checks-with-objects.requirenonnullelse">7. Null Checks with
<code>Objects.requireNonNullElse</code></a></li>
<li><a href="#http-interface-clients-java-21"
id="toc-http-interface-clients-java-21">8. HTTP Interface Clients (Java
21+)</a></li>
<li><a href="#avoid-autowired-use-constructor-injection-only"
id="toc-avoid-autowired-use-constructor-injection-only">9. Avoid
<code>@Autowired</code> use Constructor Injection Only</a></li>
<li><a href="#switch-expressions" id="toc-switch-expressions">10. Switch
Expressions</a></li>
</ul></li>
<li><a href="#getting-started" id="toc-getting-started">Getting
started</a>
<ul>
<li><a href="#command-line-interface"
id="toc-command-line-interface">Command line interface</a></li>
<li><a href="#getting-started-1" id="toc-getting-started-1">Getting
started</a></li>
<li><a href="#packaging-application"
id="toc-packaging-application">Packaging application</a></li>
<li><a href="#build-system" id="toc-build-system">Build system</a></li>
<li><a href="#best-practices" id="toc-best-practices">Best practices</a>
<ul>
<li><a href="#default-packages" id="toc-default-packages">Default
packages</a></li>
<li><a href="#typical-layout" id="toc-typical-layout">Typical
layout</a></li>
<li><a href="#auto-configuration"
id="toc-auto-configuration">Auto-configuration</a></li>
</ul></li>
<li><a href="#application-properties"
id="toc-application-properties">Application properties</a>
<ul>
<li><a href="#environment" id="toc-environment">Environment</a></li>
<li><a href="#properties-file" id="toc-properties-file">Properties
file</a></li>
<li><a href="#value-annotation" id="toc-value-annotation">Value
annotation</a></li>
</ul></li>
<li><a href="#spring-profiles" id="toc-spring-profiles">Spring
Profiles</a></li>
<li><a href="#spring-logging" id="toc-spring-logging">Spring Logging</a>
<ul>
<li><a href="#slf4j-simple-logging-facade-for-java"
id="toc-slf4j-simple-logging-facade-for-java">SLF4J (Simple Logging
Facade for Java)</a></li>
<li><a href="#logback" id="toc-logback">Logback</a></li>
<li><a href="#log4j2" id="toc-log4j2">Log4j2</a></li>
<li><a href="#java.util.logging-jul"
id="toc-java.util.logging-jul">java.util.logging (JUL)</a></li>
</ul></li>
<li><a href="#usage-example" id="toc-usage-example">Usage
example</a></li>
</ul></li>
<li><a href="#restful-services" id="toc-restful-services">Restful
services</a>
<ul>
<li><a href="#request-mapping" id="toc-request-mapping">Request
Mapping</a></li>
<li><a href="#request-body" id="toc-request-body">Request Body</a></li>
<li><a href="#path-variable" id="toc-path-variable">Path
Variable</a></li>
<li><a href="#request-parameter" id="toc-request-parameter">Request
Parameter</a></li>
<li><a href="#request-header" id="toc-request-header">Request
Header</a></li>
<li><a href="#request-attribute" id="toc-request-attribute">Request
Attribute</a></li>
<li><a href="#controller-example" id="toc-controller-example">Controller
example</a></li>
</ul></li>
<li><a href="#handling-exceptions" id="toc-handling-exceptions">Handling
exceptions</a>
<ul>
<li><a href="#controlleradvice" id="toc-controlleradvice"><span
class="citation"
data-cites="ControllerAdvice">@ControllerAdvice</span></a></li>
<li><a href="#exceptionhandler" id="toc-exceptionhandler"><span
class="citation"
data-cites="ExceptionHandler">@ExceptionHandler</span></a></li>
</ul></li>
</ul>
</nav>
<h1 id="introduction">Introduction</h1>
<p>Spring boot is an open source java based framework used to create
micro services, it is developed by Pivotal it is easy to create a stand
alone and production read spring application, using spring boo. Spring
Boot enterprise ready application that you can just run.</p>
<h2 id="document-prerequisites">Document Prerequisites</h2>
<p>This introduction is written to developers and readers who already
have experience with Java, Spring, Maven and Gradle, you can easily
understand the concepts of Spring Boot, if you have the aforementioned
knowledge already. If you are a beginner we suggest you to go through
some resources which serve as introduction to the topics and
technologies mentioned above before you start reading this resource.</p>
<h2 id="spring-and-spring-boot">Spring and Spring boot</h2>
<p>There are two different concepts here, which are Spring and Spring
Boot. What is the difference between these ? Spring is the core
framework, it consists of many components which are completely
de-coupled from each other, they are standalone components used in
building systems, they can be composed and layered on top of each other
to build complex systems. However this requires a good amount of
configuration to do, it is a complex process and it is more often than
not very common to build applications of the same type very often.
Therefore the same amount of work has to be done every time. This is
where the Spring Boot comes in, the spring boot framework is also a list
of components which are simply Spring components that are pre-configured
to work together. These components are usually represented by Gradle or
Maven dependencies, and to distinguish them from the regular spring
components they are suffixed with the ‘-boot’ work in their name, they
are nothing more than a collection of raw Spring components that are
made to work together, but in its core Spring Boot is simply just a well
defined and configured common set of components for developing
applications on top of the core Spring framework where all the cruft and
complexity is abstracted into</p>
<p>Spring Boot automatically configures your application based on the
dependencies you have added to the project by using
<code>@EnableAutoConfiguration</code> annotation. For example, if MySQL
database is on your <code>classpath</code>, but you have not configured
any database connection, then Spring Boot auto-configures an in-memory
database. The entry point of the spring boot application is the class
contains <code>@SpringBootApplication</code> annotation and the main
method. Spring Boot automatically scans all the components included in
the project by using <code>@ComponentScan</code> annotation.</p>
<p>As mentioned already all spring boot components contain the
spring-boot name prefix, along with the starter word, which is simply a
way of marking a component as part of the spring-boot framework, and the
starter signals that this component is meant to be used as a bedrock for
starting with the development, it should contain all the basics that one
should expect for the dependency to work with spring and all of its
internal components, without requiring a massive amount of user defined
configuration to produce something useable</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.springframework.boot&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;spring-boot-starter-web&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">dependency</span>&gt;</span></code></pre></div>
<p>Here is a general idea of what an entry point looks like in a spring
boot application, where we have the following annotation,
<code>@SpringBootApplication</code>, this annotation alone is a
combination of many other annotations, which are in charge of
constructing the initial context for running your application.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">boot</span><span class="op">.</span><span class="im">SpringApplication</span><span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">boot</span><span class="op">.</span><span class="im">autoconfigure</span><span class="op">.</span><span class="im">SpringBootApplication</span><span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">@SpringBootApplication</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> DemoApplication <span class="op">{</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>     <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            SpringApplication<span class="op">.</span><span class="fu">run</span><span class="op">(</span>DemoApplication<span class="op">.</span><span class="fu">class</span><span class="op">,</span> args<span class="op">);</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>     <span class="op">}</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="modern-guidelines">Modern guidelines</h1>
<h3 id="use-record-for-dtos">1. Use <code>record</code> for DTOs</h3>
<ul>
<li>Auto-generates <code>equals()</code>, <code>hashCode()</code>,
<code>toString()</code>, and getters.</li>
<li>Immutable by design (no Lombok needed).</li>
<li>Request/response DTOs (<code>@RequestBody</code>,
<code>@ResponseBody</code>).</li>
<li>Immutable configuration properties
(<code>@ConfigurationProperties</code>).</li>
</ul>
<div class="sourceCode" id="cb3"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> UserDto <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Boilerplate: constructor, getters, equals, hashCode, toString</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">record</span> <span class="fu">UserDto</span><span class="op">(</span><span class="bu">String</span> name<span class="op">,</span> <span class="dt">int</span> age<span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span></code></pre></div>
<h3 id="prefer-var-for-local-variables-judiciously">2. Prefer
<code>var</code> for Local Variables (Judiciously)</h3>
<ul>
<li>Use <code>var</code> when the type is obvious (e.g.,
<code>new</code> expressions, builders).</li>
<li>Avoid <code>var</code> if it reduces readability (e.g.,
<code>var result = service.process()</code>).</li>
</ul>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> names <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> names <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;();</span></span></code></pre></div>
<h3 id="replace-lombok-with-java-language-features">3. Replace Lombok
with Java Language Features</h3>
<ul>
<li>Use <code>record</code> for DTOs (replaces <code>@Data</code>,
<code>@Value</code>).</li>
<li>Use compact constructors:</li>
<li>When to Keep Lombok:
<ul>
<li><code>@Slf4j</code> (still concise).</li>
<li><code>@Builder</code> (until Java gets a native builder
pattern).</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb7"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Data</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">@Builder</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Product <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">record</span> <span class="fu">Product</span><span class="op">(</span><span class="bu">String</span> id<span class="op">,</span> <span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> Product <span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        Objects<span class="op">.</span><span class="fu">requireNonNull</span><span class="op">(</span>id<span class="op">);</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="sealed-classes-for-domain-models">4. Sealed Classes for Domain
Models</h3>
<ul>
<li>Explicitly restricts inheritance (better domain modeling).</li>
<li>Works great with Spring Data JPA <code>@Entity</code>
hierarchies.</li>
</ul>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">abstract</span> <span class="kw">class</span> <span class="bu">Shape</span> <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Circle <span class="kw">extends</span> <span class="bu">Shape</span> <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span>  <span class="co">// Unlimited extensibility</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">sealed</span> <span class="kw">class</span> <span class="bu">Shape</span> <span class="kw">permits</span> Circle<span class="op">,</span> <span class="bu">Rectangle</span> <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span></code></pre></div>
<h3 id="pattern-matching-instanceof-and-switch">5. Pattern Matching
(<code>instanceof</code> and <code>switch</code>)</h3>
<ul>
<li>Cleaner controller logic (e.g., handling polymorphic DTOs).</li>
</ul>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>obj <span class="kw">instanceof</span> <span class="bu">String</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> s <span class="op">=</span> <span class="op">(</span><span class="bu">String</span><span class="op">)</span> obj<span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>s<span class="op">.</span><span class="fu">length</span><span class="op">());</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>obj <span class="kw">instanceof</span> <span class="bu">String</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>s<span class="op">.</span><span class="fu">length</span><span class="op">());</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="text-blocks-for-jsonhtmlsql">6. Text Blocks for
JSON/HTML/SQL</h3>
<ul>
<li><code>@Sql</code> annotations in internal tests.</li>
<li>Hardcoded API response examples.</li>
</ul>
<div class="sourceCode" id="cb13"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span> json <span class="op">=</span> <span class="st">&quot;{</span><span class="sc">\&quot;</span><span class="st">name</span><span class="sc">\&quot;</span><span class="st">:</span><span class="sc">\&quot;</span><span class="st">John</span><span class="sc">\&quot;</span><span class="st">, </span><span class="sc">\&quot;</span><span class="st">age</span><span class="sc">\&quot;</span><span class="st">:30}&quot;</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span> json <span class="op">=</span> <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="st">    {</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;name&quot;: &quot;John&quot;,</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;age&quot;: 30</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="st">    &quot;&quot;&quot;</span><span class="op">;</span></span></code></pre></div>
<h3 id="null-checks-with-objects.requirenonnullelse">7. Null Checks with
<code>Objects.requireNonNullElse</code></h3>
<div class="sourceCode" id="cb15"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> name <span class="op">!=</span> <span class="kw">null</span> <span class="op">?</span> name <span class="op">:</span> <span class="st">&quot;default&quot;</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> Objects<span class="op">.</span><span class="fu">requireNonNullElse</span><span class="op">(</span>name<span class="op">,</span> <span class="st">&quot;default&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="http-interface-clients-java-21">8. HTTP Interface Clients (Java
21+)</h3>
<ul>
<li>No need for <code>@FeignClient</code> (standard Java
interface).</li>
</ul>
<div class="sourceCode" id="cb17"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="at">@FeignClient</span><span class="op">(</span>url <span class="op">=</span> <span class="st">&quot;https://api.example.com&quot;</span><span class="op">)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> UserClient <span class="op">{</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">@GetMapping</span><span class="op">(</span><span class="st">&quot;/users/{id}&quot;</span><span class="op">)</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    User <span class="fu">getUser</span><span class="op">(</span><span class="at">@PathVariable</span> <span class="bu">String</span> id<span class="op">);</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> UserClient <span class="op">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">@GetExchange</span><span class="op">(</span><span class="st">&quot;/users/{id}&quot;</span><span class="op">)</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    User <span class="fu">getUser</span><span class="op">(</span><span class="bu">String</span> id<span class="op">);</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="avoid-autowired-use-constructor-injection-only">9. Avoid
<code>@Autowired</code> use Constructor Injection Only</h3>
<ul>
<li>Immutable dependencies (thread-safe, no Lombok
<code>@RequiredArgsConstructor</code> needed).</li>
</ul>
<div class="sourceCode" id="cb19"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Autowired</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> UserService userService<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">final</span> UserService userService<span class="op">;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">UserController</span><span class="op">(</span>UserService userService<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">userService</span> <span class="op">=</span> userService<span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="switch-expressions">10. Switch Expressions</h3>
<div class="sourceCode" id="cb21"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>status<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&quot;OK&quot;</span><span class="op">:</span> <span class="cf">return</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&quot;BAD&quot;</span><span class="op">:</span> <span class="cf">return</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">default</span><span class="op">:</span> <span class="cf">return</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="cf">switch</span> <span class="op">(</span>status<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&quot;OK&quot;</span> <span class="op">-&gt;</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&quot;BAD&quot;</span> <span class="op">-&gt;</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">default</span> <span class="op">-&gt;</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h1 id="getting-started">Getting started</h1>
<p>This section will teach you how to create a Spring Boot application
using Maven and Gradle.</p>
<h2 id="command-line-interface">Command line interface</h2>
<p>The Spring Boot CLI is a command line tool and it allows us to run
the Groovy scripts. This is the easiest way to create a Spring Boot
application by using the Spring Boot Command Line Interface. You can
create, run and test the application in command prompt itself.</p>
<p>The spring cli has a neat way to generate projects, by simply
providing the name of the project and some build and project arguments
one can build any type of project skeleton very quickly, with the
required set of dependencies and build environment conditions. This is
mostly applicable for Maven and Gradle projects.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this would build a very simple maven project skeleton, that would only include the basic spring boot starter and</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># starter test dependencies and simple pom file for the maven project, as specified in the command below</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> spring init spring-boot <span class="at">--java-version</span><span class="op">=</span>17 <span class="at">--build</span><span class="op">=</span>maven</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># here is the list, heavily abridged for demonstration purposes, that lists what are the supported dependencies, project</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># types and, different project parameters one can pass to the spring cli to construct a project skeleton</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> spring init <span class="at">--list</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Supported</span> dependencies</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="ex">+--------------------------------------------+--------------------------------------------------------------+-----------------------+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">Id</span>                                         <span class="kw">|</span> <span class="ex">Description</span>                                                  <span class="kw">|</span> <span class="ex">Required</span> version      <span class="kw">|</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="ex">+--------------------------------------------+--------------------------------------------------------------+-----------------------+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">activemq</span>                                   <span class="kw">|</span> <span class="ex">Spring</span> JMS support with Apache ActiveMQ <span class="st">&#39;Classic&#39;</span>.           <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">actuator</span>                                   <span class="kw">|</span> <span class="ex">Supports</span> built in <span class="er">(</span><span class="ex">or</span> custom<span class="kw">)</span> <span class="ex">endpoints</span> that let you monitor <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">and</span> manage your application <span class="at">-</span> such as application health,    <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">metrics,</span> sessions, etc.                                      <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">amqp</span>                                       <span class="kw">|</span> <span class="ex">Gives</span> your applications a common platform to send and        <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">receive</span> messages, and your messages a safe place to live     <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="cf">until</span> <span class="ex">received.</span>                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">azure-support</span>                              <span class="kw">|</span> <span class="ex">Auto-configuration</span> for Azure Services <span class="er">(</span><span class="ex">Service</span> Bus, Storage, <span class="kw">|</span> <span class="op">&gt;</span>=3.4.0 <span class="ex">and</span> <span class="op">&lt;</span>3.5.0-M1 <span class="kw">|</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">Active</span> Directory, Key Vault, and more<span class="kw">)</span><span class="bu">.</span>                      <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">batch</span>                                      <span class="kw">|</span> <span class="ex">Batch</span> applications with transactions, retry/skip and chunk   <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">based</span> processing.                                            <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">cache</span>                                      <span class="kw">|</span> <span class="ex">Provides</span> cache-related operations, such as the ability to    <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">update</span> the content of the cache, but does not provide the    <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">actual</span> data store.                                           <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">wavefront</span>                                  <span class="kw">|</span> <span class="ex">Publish</span> metrics and optionally distributed traces to Tanzu   <span class="kw">|</span> <span class="op">&gt;</span>=3.4.0 <span class="ex">and</span> <span class="op">&lt;</span>3.6.0-M1 <span class="kw">|</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">Observability</span> by Wavefront, a SaaS-based metrics monitoring  <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">and</span> analytics platform that lets you visualize, query, and   <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">alert</span> over data from across your entire stack.               <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">web</span>                                        <span class="kw">|</span> <span class="ex">Build</span> web, including RESTful, applications using Spring MVC. <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">Uses</span> Apache Tomcat as the default embedded container.        <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">web-services</span>                               <span class="kw">|</span> <span class="ex">Facilitates</span> contract-first SOAP development. Allows for the  <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">creation</span> of flexible web services using one of the many ways <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">to</span> manipulate XML payloads.                                  <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">webflux</span>                                    <span class="kw">|</span> <span class="ex">Build</span> reactive web applications with Spring WebFlux and      <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">Netty.</span>                                                       <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">websocket</span>                                  <span class="kw">|</span> <span class="ex">Build</span> Servlet-based WebSocket applications with SockJS and   <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span> <span class="ex">STOMP.</span>                                                       <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                                            <span class="kw">|</span>                                                              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">zipkin</span>                                     <span class="kw">|</span> <span class="ex">Enable</span> and expose span and trace IDs to Zipkin.              <span class="kw">|</span>                       <span class="kw">|</span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a><span class="ex">+--------------------------------------------+--------------------------------------------------------------+-----------------------+</span></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a><span class="ex">Project</span> types <span class="er">(</span><span class="ex">*</span> denotes the default<span class="kw">)</span></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a><span class="ex">+-----------------------+--------------------------------------------------------------+--------------------------------------------+</span></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">Id</span>                    <span class="kw">|</span> <span class="ex">Description</span>                                                  <span class="kw">|</span> <span class="ex">Tags</span>                                       <span class="kw">|</span></span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a><span class="ex">+-----------------------+--------------------------------------------------------------+--------------------------------------------+</span></span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">gradle-build</span>          <span class="kw">|</span> <span class="ex">Generate</span> a Gradle build file.                                <span class="kw">|</span> <span class="ex">build:gradle,format:build</span>                  <span class="kw">|</span></span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                       <span class="kw">|</span>                                                              <span class="kw">|</span>                                            <span class="kw">|</span></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">gradle-project</span> <span class="pp">*</span>      <span class="kw">|</span> <span class="ex">Generate</span> a Gradle based project archive using the Groovy     <span class="kw">|</span> <span class="ex">build:gradle,dialect:groovy,format:project</span> <span class="kw">|</span></span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                       <span class="kw">|</span> <span class="ex">DSL.</span>                                                         <span class="kw">|</span>                                            <span class="kw">|</span></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                       <span class="kw">|</span>                                                              <span class="kw">|</span>                                            <span class="kw">|</span></span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">gradle-project-kotlin</span> <span class="kw">|</span> <span class="ex">Generate</span> a Gradle based project archive using the Kotlin     <span class="kw">|</span> <span class="ex">build:gradle,dialect:kotlin,format:project</span> <span class="kw">|</span></span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                       <span class="kw">|</span> <span class="ex">DSL.</span>                                                         <span class="kw">|</span>                                            <span class="kw">|</span></span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                       <span class="kw">|</span>                                                              <span class="kw">|</span>                                            <span class="kw">|</span></span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">maven-build</span>           <span class="kw">|</span> <span class="ex">Generate</span> a Maven pom.xml.                                    <span class="kw">|</span> <span class="ex">build:maven,format:build</span>                   <span class="kw">|</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                       <span class="kw">|</span>                                                              <span class="kw">|</span>                                            <span class="kw">|</span></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">maven-project</span>         <span class="kw">|</span> <span class="ex">Generate</span> a Maven based project archive.                      <span class="kw">|</span> <span class="ex">build:maven,format:project</span>                 <span class="kw">|</span></span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a><span class="ex">+-----------------------+--------------------------------------------------------------+--------------------------------------------+</span></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a><span class="ex">Parameters</span></span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a><span class="ex">+-------------+------------------------------------------+------------------------------+</span></span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">Id</span>          <span class="kw">|</span> <span class="ex">Description</span>                              <span class="kw">|</span> <span class="ex">Default</span> value                <span class="kw">|</span></span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a><span class="ex">+-------------+------------------------------------------+------------------------------+</span></span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">artifactId</span>  <span class="kw">|</span> <span class="ex">project</span> coordinates <span class="er">(</span><span class="ex">infer</span> archive name<span class="kw">)</span> <span class="kw">|</span> <span class="ex">demo</span>                         <span class="kw">|</span></span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">bootVersion</span> <span class="kw">|</span> <span class="ex">spring</span> boot version                      <span class="kw">|</span> <span class="ex">3.5.3</span>                        <span class="kw">|</span></span>
<span id="cb24-75"><a href="#cb24-75" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">description</span> <span class="kw">|</span> <span class="ex">project</span> description                      <span class="kw">|</span> <span class="ex">Demo</span> project for Spring Boot <span class="kw">|</span></span>
<span id="cb24-76"><a href="#cb24-76" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">groupId</span>     <span class="kw">|</span> <span class="ex">project</span> coordinates                      <span class="kw">|</span> <span class="ex">com.example</span>                  <span class="kw">|</span></span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">javaVersion</span> <span class="kw">|</span> <span class="ex">language</span> level                           <span class="kw">|</span> <span class="ex">17</span>                           <span class="kw">|</span></span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">language</span>    <span class="kw">|</span> <span class="ex">programming</span> language                     <span class="kw">|</span> <span class="ex">java</span>                         <span class="kw">|</span></span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">name</span>        <span class="kw">|</span> <span class="ex">project</span> name <span class="er">(</span><span class="ex">infer</span> application name<span class="kw">)</span>    <span class="kw">|</span> <span class="ex">demo</span>                         <span class="kw">|</span></span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">packageName</span> <span class="kw">|</span> <span class="ex">root</span> package                             <span class="kw">|</span> <span class="ex">com.example.demo</span>             <span class="kw">|</span></span>
<span id="cb24-81"><a href="#cb24-81" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">packaging</span>   <span class="kw">|</span> <span class="ex">project</span> packaging                        <span class="kw">|</span> <span class="ex">jar</span>                          <span class="kw">|</span></span>
<span id="cb24-82"><a href="#cb24-82" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="bu">type</span>        <span class="kw">|</span> <span class="ex">project</span> type                             <span class="kw">|</span> <span class="ex">gradle-project</span>               <span class="kw">|</span></span>
<span id="cb24-83"><a href="#cb24-83" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">version</span>     <span class="kw">|</span> <span class="ex">project</span> version                          <span class="kw">|</span> <span class="ex">0.0.1-SNAPSHOT</span>               <span class="kw">|</span></span>
<span id="cb24-84"><a href="#cb24-84" aria-hidden="true" tabindex="-1"></a><span class="ex">+-------------+------------------------------------------+------------------------------+</span></span></code></pre></div>
<h2 id="getting-started-1">Getting started</h2>
<p>Spring boot provides a number of starters to add the jars in our
class paths, for example for writing a rest endpoint we end to add the
spring-boot-starter-web dependency in our class path. Observe the codes
shown below for a better understanding.</p>
<p>The main method should be writing the Spring Boot Application class.
This class should be annotated with the
<code>SpringBootApplication</code> annotation, this is the entry point
for the spring boot application to start, you can find the main class
file under the src/java/main path / directory</p>
<p>Now to write a simple Hello World Rest endpoint in the spring boot
application main class file itself, follow the steps shown below:</p>
<ul>
<li>Firstly, add the <code>RestControoller</code> annotation at the top
of the class</li>
<li>Now, write a request URI method with the <code>RequestMethod</code>
annotation</li>
<li>Then the request URI method should return the Hello World
string</li>
</ul>
<div class="sourceCode" id="cb25"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> com</span><span class="op">.</span><span class="im">tutorialspoint</span><span class="op">.</span><span class="im">demo</span><span class="op">;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">boot</span><span class="op">.</span><span class="im">SpringApplication</span><span class="op">;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">boot</span><span class="op">.</span><span class="im">autoconfigure</span><span class="op">.</span><span class="im">SpringBootApplication</span><span class="op">;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">web</span><span class="op">.</span><span class="im">bind</span><span class="op">.</span><span class="im">annotation</span><span class="op">.</span><span class="im">RequestMapping</span><span class="op">;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">web</span><span class="op">.</span><span class="im">bind</span><span class="op">.</span><span class="im">annotation</span><span class="op">.</span><span class="im">RestController</span><span class="op">;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="at">@SpringBootApplication</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="at">@RestController</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> HelloWorldController <span class="op">{</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">@RequestMapping</span><span class="op">(</span>value<span class="op">=</span><span class="st">&quot;/&quot;</span><span class="op">)</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">hello</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Hello World&quot;</span><span class="op">;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="packaging-application">Packaging application</h2>
<p>Creating an executable JAR. Let us create and executable JAR file to
run the Spring Boot Application, by using Maven or Gradle. The Spring
executable JAR is somewhat different than regular JAR files which one
can execute, the Spring <code>JARs</code> are meant to be self
containing, they bundle the actual web server that is used to run the
application, which could be a small web server like Tomcat, then on top
of that all other dependencies are included into the jar. Unlike regular
JARs (which only contain your classes in <code>/</code>), a Spring Boot
executable JAR has:</p>
<p>First make sure that the maven plugin that is responsible for
packaging the spring application is included into your pom file, we are
not going to be using the regular maven package plugin -
<code>maven-jar-plugin</code></p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">parent</span>&gt;</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.springframework.boot&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;spring-boot-starter-parent&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">version</span>&gt;3.2.0&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">parent</span>&gt;</span></code></pre></div>
<pre><code>BOOT-INF/
    ├── classes/      # Your compiled application classes
    ├── lib/          # All dependency JARs
META-INF/
    ├── MANIFEST.MF   # Defines the launcher class
org/springframework/boot/loader/
    ├── JarLauncher.class  # Spring Boot&#39;s custom launcher</code></pre>
<ul>
<li>Spring Boot uses <code>JarLauncher</code> (from
<code>spring-boot-loader</code>) to <strong>bootstrap</strong> the
application.</li>
<li>This launcher knows how to load classes from
<code>BOOT-INF/classes</code> and <code>BOOT-INF/lib</code>, unlike the
standard Java classloader.</li>
<li>All dependencies are <strong>embedded</strong> in the JAR (no need
for an external <code>lib</code> folder).</li>
<li>Avoids <code>classpath</code> issues when deploying.</li>
</ul>
<p>How does it work ? If we compare the standard jar packaging plugin
provided by maven to the spring one. The Standard maven plugin would
package the JAR without including the dependencies or libraries that our
project depends on, just the compiled classes for our project, the
structure of a standard jar might look something like that</p>
<pre><code>your-app.jar
├── META-INF/
│   └── MANIFEST.MF       # Basic metadata (Main-Class points directly to your app)
├── com/
│   └── yourpackage/      # Your compiled classes
└── (No dependencies!)    # Requires external `lib/*.jar` files</code></pre>
<p>Meaning we have no embedded dependencies included, and we have no
embedded server included in the final JAR, that means that these have to
be provided manually, that works if we are trying to deploy on an
already existing web server, which presumable would have these
dependencies installed. There are many ways to run a jar without its
dependencies, but the most common one is to simply add those to the
classpath, meaning that we have to build the command
<code>java -jar</code> to include the required dependencies along with
the jar we are trying to execute, this could be useful on systems where
many jars are deployed on a single web server, and the dependencies are
shared across the jars for the most part. This is how it is done in
monolithic systems where micro services are not deployed.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first we copy all the dependencies into a common directory, which would then be passed to the java cp command, note</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># that we are using shell expansion here, the target/lib/*, is shell specific and the shell itself would expand all the</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># jars in the lib folder when running the command, this is not something that is done or understood by the java binary,</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> target/lib <span class="kw">&amp;&amp;</span> <span class="fu">cp</span> myapp.jar target/lig</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> dependency:copy-dependencies <span class="at">-DoutputDirectory</span><span class="op">=</span>target/lib</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="ex">java</span> <span class="at">-cp</span> <span class="st">&quot;target/your-app.jar:target/lib/*&quot;</span> com.myapp.MainClass</span></code></pre></div>
<p>Note that we are passing the entire classpath to the JVM, above, we
are not using <code>java -jar</code> that is because that command
expects the jar to have a valid MANIFEST file, which the jar compiled
and packaged by default from the maven-jar-plugin does not. We are going
to leverage another plugin called the assembly plugin to do exactly that
- build a MANIFEST file into the jar which will be read by the JVM to
construct the classpath based on the contents of that file</p>
<p>There are also other ways to do this by configuring the maven plugin
to package these libraries for you while the jar is being built, this is
what the spring boot plugin does actually it would put a lib/ folder
with the libraries and dependencies directly into the jar. Which is
effectively the same as passing it on the classpath. Here is an example
of how you can package the jar using the assembly plugin which would
effectively do what we discussed</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">plugin</span>&gt;</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.apache.maven.plugins&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;maven-assembly-plugin&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">version</span>&gt;3.6.0&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">configuration</span>&gt;</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">descriptorRefs</span>&gt;</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">descriptorRef</span>&gt;jar-with-dependencies&lt;/<span class="kw">descriptorRef</span>&gt;</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">descriptorRefs</span>&gt;</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">archive</span>&gt;</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>            <span class="co">&lt;!-- Here is the config for the MANIFEST file that will be constructed and put into the jar --&gt;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">manifest</span>&gt;</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">mainClass</span>&gt;com.yourpackage.MainClass&lt;/<span class="kw">mainClass</span>&gt;</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">manifest</span>&gt;</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">archive</span>&gt;</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">configuration</span>&gt;</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">executions</span>&gt;</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">execution</span>&gt;</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">phase</span>&gt;package&lt;/<span class="kw">phase</span>&gt;</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">goals</span>&gt;</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">goal</span>&gt;single&lt;/<span class="kw">goal</span>&gt;</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">goals</span>&gt;</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">execution</span>&gt;</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">executions</span>&gt;</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">plugin</span>&gt;</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># after the assembly plugin has done its job, we would have a jar file which can be simply run like so, which is pretty</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># much the same way we run the spring jars as well, since your jar would now contain the MANIFEST file, which described</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># how to construct the classpath and where to find all the libraries and dependencies required</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">-jar</span> app.jar</span></code></pre></div>
<p>So how does the spring boot maven plugin package the jar and how does
it run, the following steps are being followed to execute this
process:</p>
<ol type="1">
<li><p><strong>We start by running the jar</strong>:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">-jar</span> your-app.jar</span></code></pre></div></li>
<li><p><strong>Java virtual machine reads
<code>META-INF/MANIFEST.MF</code></strong>:</p>
<pre class="plaintext"><code> Manifest-Version: 1.0
 Created-By: Maven JAR Plugin 3.4.2
 Build-Jdk-Spec: 17
 Implementation-Title: demo
 Implementation-Version: 0.0.1-SNAPSHOT
 Main-Class: org.springframework.boot.loader.launch.JarLauncher
 Start-Class: com.spring.demo.DemoApplication
 Spring-Boot-Version: 3.5.3
 Spring-Boot-Classes: BOOT-INF/classes/
 Spring-Boot-Lib: BOOT-INF/lib/
 Spring-Boot-Classpath-Index: BOOT-INF/classpath.idx
 Spring-Boot-Layers-Index: BOOT-INF/layers.idx</code></pre></li>
<li><p><strong><code>JarLauncher</code> takes over</strong>:</p>
<ul>
<li>Sets up a <strong>custom classloader</strong> to load classes from:
<ul>
<li><code>BOOT-INF/classes/</code> (your code).</li>
<li><code>BOOT-INF/lib/*.jar</code> (dependencies).</li>
</ul></li>
<li>Discovers and launches the <code>Start-Class</code> (your
<code>@SpringBootApplication</code> class).</li>
</ul></li>
<li><p><strong>Spring Boot initializes</strong>:</p>
<ul>
<li>Starts the embedded server (if applicable).</li>
<li>Autoconfigures beans, initialize the context, etc.</li>
</ul></li>
</ol>
<p>So if we want to really compare both here is what we have established
so far, the main differences between the maven-jar-plugin and the
spring-boot-maven-plugin.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 24%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th><code>maven-jar-plugin</code></th>
<th><code>spring-boot-maven-plugin</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Dependencies</strong></td>
<td>Not included (external <code>lib/</code>)</td>
<td>Embedded in <code>BOOT-INF/lib/</code></td>
</tr>
<tr class="even">
<td><strong>Main-Class</strong></td>
<td>Directly points to your class</td>
<td>Delegates to <code>JarLauncher</code></td>
</tr>
<tr class="odd">
<td><strong>Class Loading</strong></td>
<td>Standard JVM classloader</td>
<td>Custom <code>LaunchedURLClassLoader</code></td>
</tr>
<tr class="even">
<td><strong>Runnable</strong></td>
<td>Requires manual classpath setup</td>
<td>Works with <code>java -jar</code></td>
</tr>
<tr class="odd">
<td><strong>Web Server</strong></td>
<td>Needs external Tomcat/Jetty</td>
<td>Embedded server (Tomcat/Netty/etc.)</td>
</tr>
</tbody>
</table>
<p>There is another type of JAR archive, called a WAR application, this
is another type of JAR that is deployed on a web server, unlike the JAR
file, the WAR has a different format and specification this is because
the web server where this WAR will be deployed requires a specific
format and structure to be present.</p>
<p>A <strong>WAR</strong> is a specialized JAR used for <strong>web
applications</strong> (e.g., Servlet-based apps like Spring MVC). It
follows a strict structure defined by the
<code>Java EE/Jakarta EE</code> spec and is deployed to <strong>external
servers</strong> (e.g., Tomcat, Jetty, WildFly).</p>
<pre class="plaintext"><code>my-app.war
├── WEB-INF/
│   ├── classes/       # Your compiled classes (e.g., `com.yourpackage`)
│   ├── lib/           # Dependency JARs (external to the WAR)
│   └── web.xml        # Servlet configuration (optional in modern apps)
├── META-INF/          # Metadata (e.g., context info)
└── static/            # Static files (HTML, JS, CSS)</code></pre>
<p>Requires a Servlet container (e.g., Tomcat). The dependencies in
<code>WEB-INF/lib/</code> are loaded by the server, and there is no main
class, the server starts the app (not <code>java -jar</code>).</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">plugin</span>&gt;</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.apache.maven.plugins&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;maven-war-plugin&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">version</span>&gt;3.4.0&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">plugin</span>&gt;</span></code></pre></div>
<p>To setup and deploy the application you can simply do</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mvn clean package  <span class="co"># Generates `target/my-app.war`</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp target/my-app.war /opt/tomcat/webapps/</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Tomcat unpacks the WAR and starts the app.</span></span></code></pre></div>
<p>To be able to share common libraries, we can use the special
directory that tomcat checks, where we can Place common JARs (e.g.,
Spring, Hibernate, JDBC drivers) in the server’s <code>lib/</code>
folder. All deployed WARs automatically inherit these JARs in their
classpath.</p>
<pre class="plaintext"><code>/opt/tomcat/lib/
├── spring-core.jar
├── hibernate-core.jar
└── postgresql-driver.jar</code></pre>
<p>We can also make sure to exclude the dependency from the final
archive, by setting the provided property on the scope tag, this will
signal the maven builder that this dependency must not be packaged in,
and it will be <code>provided</code> by an external party, in this case
it will be the web server - tomcat in our example.</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">project</span>&gt;</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">packaging</span>&gt;war&lt;/<span class="kw">packaging</span>&gt;</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">dependencies</span>&gt;</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Mark shared dependencies as &#39;provided&#39; --&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">groupId</span>&gt;org.springframework&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">artifactId</span>&gt;spring-core&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">version</span>&gt;6.1.0&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">scope</span>&gt;provided&lt;/<span class="kw">scope</span>&gt;  <span class="co">&lt;!-- Server will supply this --&gt;</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">dependency</span>&gt;</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">dependencies</span>&gt;</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">project</span>&gt;</span></code></pre></div>
<p>WARs can <strong>omit libraries</strong> if the server provides them
centrally (via <code>lib/</code> or <code>shared/lib/</code>). This is
common in traditional Java EE deployments but sacrifices version
flexibility. Modern apps (especially Spring Boot) prefer
<strong>self-contained JARs</strong> to avoid conflicts, and it is much
harder to setup a micro service environment where the web server is
separately deployed from the application, and the web server has the
common dependencies already installed. This is more suitable for
monolithic applications where there are centralized servers installed on
big fat environments, and they can be pre-loaded with all the common
dependencies marked as provided in the pom file of the application.</p>
<p>To understand it better, here are the different types of scopes that
maven allows you to specify for a dependency, you can certainly see that
there are different use cases, and in most use cases, we are either
going to be using runtime, compiled or provided. For an embedded server,
the most common one will be the compile one, since all the libraries
must be present at compile time into the JAR, for WAR types we might
make use of a lot of provided dependencies such as Tomcat shared
implementation libraries that are going to be provided by the web server
by default</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 11%" />
<col style="width: 7%" />
<col style="width: 11%" />
<col style="width: 12%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr class="header">
<th>Scope</th>
<th>Compile</th>
<th>Test</th>
<th>Runtime</th>
<th>Packaged</th>
<th>Example Use Case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>compile</code></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>Spring, Hibernate</td>
</tr>
<tr class="even">
<td><code>provided</code></td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>Servlet API, Tomcat-shared libs</td>
</tr>
<tr class="odd">
<td><code>runtime</code></td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>JDBC drivers</td>
</tr>
<tr class="even">
<td><code>test</code></td>
<td>❌</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>JUnit, Mockito</td>
</tr>
<tr class="odd">
<td><code>system</code></td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>Avoid (non-portable JARs)</td>
</tr>
<tr class="even">
<td><code>import</code></td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>BOMs for dependency management</td>
</tr>
</tbody>
</table>
<ol type="1">
<li><strong><code>compile</code> (Default)</strong>
<ul>
<li>Available in all phases (compile, test, runtime).</li>
<li>Packaged in the final JAR/WAR.</li>
<li><strong>Example</strong>: <code>spring-core</code> (needed at
runtime).</li>
</ul></li>
<li><strong><code>runtime</code></strong>
<ul>
<li>Not needed for compilation, but required at runtime.</li>
<li>Packaged in the final artifact.</li>
<li><strong>Example</strong>: <code>mysql-connector-java</code> (loaded
dynamically).</li>
</ul></li>
<li><strong><code>provided</code></strong>
<ul>
<li>Available during compilation and testing, but <strong>not
packaged</strong>.</li>
<li>Assumed to be provided by the runtime (e.g., a server).</li>
<li><strong>Example</strong>: <code>javax.servlet-api</code> (provided
by Tomcat).</li>
</ul></li>
<li><strong><code>system</code></strong> (Avoid if possible)
<ul>
<li>Like <code>provided</code>, but points to a local JAR file.</li>
<li><strong>Example</strong>: Rarely used (non-portable).</li>
</ul></li>
<li><strong><code>import</code></strong> (Special case)
<ul>
<li>Used in <code>&lt;dependencyManagement&gt;</code> to inherit
versions from another POM.</li>
<li><strong>Example</strong>: <code>spring-boot-dependencies</code> (BOM
files).</li>
</ul></li>
<li><strong><code>test</code></strong>
<ul>
<li>Only available during testing (<code>src/test</code>).</li>
<li>Never packaged.</li>
<li><strong>Example</strong>: <code>junit</code> (test-only
dependency).</li>
</ul></li>
</ol>
<h2 id="build-system">Build system</h2>
<p>In Spring Boot, choosing a build system is an important task. We
recommend Maven or Gradle as they provide a good support for dependency
management. Spring does not support well other build systems.</p>
<p>Spring Boot team provides a list of dependencies to support the
Spring Boot version for its every release. You do not need to provide a
version for dependencies in the build configuration file. Spring Boot
automatically configures the dependencies version based on the release.
Remember that when you upgrade the Spring Boot version, dependencies
also will upgrade automatically. This is achieved by the parent BOM
spring dependency which you specify, the BOM - which stands for bill of
materials, is a set of pre-defined list of dependencies. The spring BOM
has a version, which carries with it the correct combination of all
spring dependency versions.</p>
<h2 id="best-practices">Best practices</h2>
<p>Spring Boot does not have any code layout to work with. However,
there are some best practices that will help us. This chapter talks
about them in detail.</p>
<h3 id="default-packages">Default packages</h3>
<p>A class that does not have any package declaration is considered as a
<strong>default package</strong>. Note that generally a default package
declaration is not recommended. Spring Boot will cause issues such as
malfunctioning of Auto Configuration or Component Scan, when you use
default package.</p>
<h3 id="typical-layout">Typical layout</h3>
<p>It is generally accepted that at the root name of the artifact id for
the project - <code>com.myapp.project</code>, we should have the
Application.java file, which contains the Main class, this is due to the
fact that any class annotated with the
<code>@SpringBootApplication</code> annotation, will serve as entry
point for scanning the packages and beans under it, in that case if we
put the main class at <code>com.myapp.project</code>, then everything
under this root package name will be considered for injection by the
spring components.</p>
<h3 id="auto-configuration">Auto-configuration</h3>
<p>As mentioned in spring we have a concept called an Auto
configuration, this is a process by which spring picks specific
pre-defined beans on the class path. The way it works is by defining a
special type of file that contains the full path to the class that is
considered to be the auto-configuration class, this file is called the
<code>org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>,
this file contains lines of text which define the different classes
spring autoconfigure should consider when starting the application, this
is different compared to classes annotated with <span class="citation"
data-cites="Configuration">@Configuration</span>, which we will talk
about later.</p>
<p>Here is the abridged version of the file included in the
<code>META-INF/spring/</code> folder in the autoconfigure dependency,
this file is automatically picked when we define the
<code>EnableAutoConfiguration</code> annotation on a spring project,
then each of those classes will be instantiated and their methods
run.</p>
<pre class="imports"><code>org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration
............................................................................................
org.springframework.boot.autoconfigure.websocket.reactive.WebSocketReactiveAutoConfiguration
org.springframework.boot.autoconfigure.websocket.servlet.WebSocketMessagingAutoConfiguration
org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration</code></pre>
<p>It is prudent to note that you can also create your own imports file,
by simply putting in tin the src/main/resources folder of your own
library of project, then when it gets built it will be put into the
META-INF folder in your final JAR, that file will then be looked up by
the spring autoconfigure library. Create the file into the resources
directory
<code>src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>:
Loaded <strong>automatically</strong> when the JAR is on the classpath,
and no <code>scanBasePackages</code> required.</p>
<pre class="plaintext"><code>com.yourlib.autoconfig.CustomSecurityAutoConfig</code></pre>
<div class="sourceCode" id="cb41"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> com</span><span class="op">.</span><span class="im">yourlib</span><span class="op">.</span><span class="im">autoconfig</span><span class="op">;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="at">@Configuration</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="at">@ConditionalOnClass</span><span class="op">(</span>SomeDependency<span class="op">.</span><span class="fu">class</span><span class="op">)</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> CustomSecurityAutoConfig <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span></code></pre></div>
<p>On another hand we have the <span class="citation"
data-cites="Configuration">@Configuration</span> annotation, that is a
bit different since it is discovered through component scanning, which
is a different process in spring, it also occurs in a different stage of
the application startup process, this is later than the auto
configuration classes as well. They are loaded if these fall under the
scan base packages list, i.e. the class is in a package scanned by
Spring (<code>com.yourpackage</code>), or explicitly imported with the
annotation - <code>@Import(AppConfig.class)</code>.</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Configuration</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> AppConfig <span class="op">{</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Bean</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> MyService <span class="fu">myService</span><span class="op">()</span> <span class="op">{</span> <span class="cf">return</span> <span class="kw">new</span> <span class="fu">MyService</span><span class="op">();</span> <span class="op">}</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><code>In the end the result of both is the same, both types of classes are defined using the same annotations, and the same rules, the only difference is that the spring provided auto configurations are mostly located in the starter packages, which spring provides, and are defined in the imports file, in theory if you remove the imports file, and put the spring org.srpingboot base package in the scanBasePackages annotation value of ComponentScan, you will achieve the same effect, the only difference is that the configurations defined in the imports file are run earlier than the component scanning that spring does on the classes under packages defined in scanBasePackages, but that still happens after the spring context is initialized</code></p>
<p>The general rule of thumb, is that if you are creating a library or
re-usable component it is easier and cleaner to provide your own imports
file, this would avoid having your package’s users or clients to have to
include the base package of your library or component every time into
the <code>ComponentScan.scanBasePackages annotation</code>.</p>
<h2 id="application-properties">Application properties</h2>
<p>Application Properties support us to work in different environments.
In this section, you are going to see how to configure and specify the
properties to a Spring Boot application.</p>
<p>The general order of properties collection that Spring Boot does is
by evaluating sources in this order (higher overrides lower order):</p>
<ol type="1">
<li><strong>Command-line arguments</strong> (<code>--key=value</code>,
directly run the application with these properties).</li>
<li><strong><code>SPRING_APPLICATION_JSON</code></strong> (environment
variable with JSON properties, not a file location).</li>
<li><strong><code>JNDI</code></strong> (Java Naming and Directory
Interface).</li>
<li><strong>Externalized files</strong>
(<code>--spring.config.location</code>).</li>
<li><strong>Environment YAML/properties</strong> (e.g.,
<code>application-prod.yml</code>).</li>
<li><strong>Default files
<code>application.yml</code>/<code>application.properties</code></strong>.</li>
</ol>
<p>Here an example of implementing the different types of property
overrides when working with a spring application, also defined in order
of most precedence to the least precedence.</p>
<ol type="1">
<li><p><strong>Command-line arguments</strong> (<code>--key=value</code>
in <code>java -jar</code>).</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">java</span> <span class="at">-jar</span> app.jar <span class="at">--server.port</span><span class="op">=</span>8081</span></code></pre></div></li>
<li><p><strong>Environment variables</strong> (e.g.,
<code>SPRING_DATASOURCE_URL</code>, <code>SERVER_PORT</code>).</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">SERVER_PORT</span><span class="op">=</span>8081</span></code></pre></div></li>
<li><p><strong>System properties</strong> (<code>-Dkey=value</code>
passed to JVM).</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">java</span> <span class="at">-Dserver.port</span><span class="op">=</span>8081 <span class="at">-jar</span> app.jar</span></code></pre></div></li>
<li><p><strong>Profile-specific YAML/properties</strong> (e.g.,
<code>application-prod.yml</code>).</p></li>
<li><p><strong>Default
<code>application.yml</code>/<code>application.properties</code></strong>.
### Command line</p></li>
</ol>
<p>Spring Boot application converts the command line properties into
Spring Boot Environment properties. Command line properties take
precedence over the other property sources. By default, Spring Boot uses
the 8080 port number to start the Tomcat. Let us learn how change the
port number by using command line properties. There are a few ways to
override certain properties on the command line, such that they will
take precedence over the ones with which the app was packaged</p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Values will override any `server.port` or `spring.datasource.url` defined in `application.yml`.</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">-jar</span> your-app.jar <span class="at">--server.port</span><span class="op">=</span>8081 <span class="at">--spring.datasource.url</span><span class="op">=</span>jdbc:mysql://localhost:3306/mydb</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Properties in `custom-config.yml` will **override** those in `application.yml`.</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Add `classpath:` for files in the classpath (e.g., `classpath:override.properties`).</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">-jar</span> your-app.jar <span class="at">--spring.config.location</span><span class="op">=</span>file:/path/to/custom-config.yml</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge additional files without replacing the packaged `application.yml`:</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">-jar</span> your-app.jar <span class="at">--spring.config.additional-location</span><span class="op">=</span>file:/path/to/extra.properties</span></code></pre></div>
<h3 id="environment">Environment</h3>
<p>There are several ways to override the properties through the
environment,</p>
<h4 id="core-spring-boot-variables">Core Spring Boot Variables</h4>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="header">
<th>Env Variable</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SPRING_APPLICATION_JSON</code></td>
<td>Injects properties as JSON (e.g.,
<code>{"server":{"port":8081}}</code>).</td>
</tr>
<tr class="even">
<td><code>SPRING_CONFIG_LOCATION</code></td>
<td>Overrides config file path (e.g.,
<code>file:/config/override.yml</code>).</td>
</tr>
<tr class="odd">
<td><code>SPRING_CONFIG_ADDITIONAL_LOCATION</code></td>
<td>Adds extra config files without replacing defaults.</td>
</tr>
<tr class="even">
<td><code>SPRING_PROFILES_ACTIVE</code></td>
<td>Sets active profiles (e.g., <code>prod,debug</code>).</td>
</tr>
<tr class="odd">
<td><code>SPRING_CLOUD_CONFIG_ENABLED</code></td>
<td>Disables/configures Spring Cloud Config (e.g.,
<code>false</code>).</td>
</tr>
</tbody>
</table>
<h4 id="logging-and-debugging">Logging and Debugging</h4>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>Env Variable</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>DEBUG</code></td>
<td>Enables debug logs if set to <code>true</code> or
<code>1</code>.</td>
</tr>
<tr class="even">
<td><code>LOGGING_LEVEL_ROOT</code></td>
<td>Sets root log level (e.g., <code>DEBUG</code>,
<code>INFO</code>).</td>
</tr>
<tr class="odd">
<td><code>LOGGING_LEVEL_org.springframework.web</code></td>
<td>Sets package-specific logging (e.g., <code>DEBUG</code>).</td>
</tr>
<tr class="even">
<td><code>SPRING_OUTPUT_ANSI_ENABLED</code></td>
<td>Force ANSI color output (e.g., <code>ALWAYS</code>).</td>
</tr>
</tbody>
</table>
<h4 id="server-and-database-overrides">Server and Database
Overrides</h4>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="header">
<th>Env Variable</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SERVER_PORT</code></td>
<td>Overrides <code>server.port</code> (e.g., <code>8081</code>).</td>
</tr>
<tr class="even">
<td><code>SERVER_SERVLET_CONTEXT_PATH</code></td>
<td>Sets the context path (e.g., <code>/api</code>).</td>
</tr>
<tr class="odd">
<td><code>SPRING_DATASOURCE_URL</code></td>
<td>Overrides DB URL (e.g., <code>jdbc:mysql://db:3306/app</code>).</td>
</tr>
<tr class="even">
<td><code>SPRING_DATASOURCE_USERNAME</code></td>
<td>Sets DB username.</td>
</tr>
<tr class="odd">
<td><code>SPRING_DATASOURCE_PASSWORD</code></td>
<td>Sets DB password.</td>
</tr>
</tbody>
</table>
<p>Replace <code>.</code> with <code>_</code> and uppercase (e.g.,
<code>server.port</code> → <code>SERVER_PORT</code>). Nested keys:
<code>spring.datasource.url</code> →
<code>SPRING_DATASOURCE_URL</code>.</p>
<h4 id="overriding-with-java_tool_options">Overriding with
<code>JAVA_TOOL_OPTIONS</code></h4>
<p>If you can’t use Spring-specific vars, pass the Java system
properties, which will be picked up by spring, since it does a lookup in
order of environment variables, system variables, and then proceeds with
startup arguments</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JAVA_TOOL_OPTIONS</span><span class="op">=</span><span class="st">&quot;-Dserver.port=8081 -Ddebug=true&quot;</span></span></code></pre></div>
<h3 id="properties-file">Properties file</h3>
<p>Properties files are used to keep ‘N’ number of properties in a
single file to run the application in a different environment. In Spring
Boot, properties are kept in the
<strong>application.[properties/yml]</strong> files under the classpath.
The application.properties file is located in the
<strong>src/main/resources</strong> directory. The code for sample
<strong>application.properties</strong> and the
<strong>application.yml</strong> file are given below:</p>
<pre class="properties"><code>server.port=9090
spring.application.name=demoservice</code></pre>
<div class="sourceCode" id="cb49"><pre
class="sourceCode yml"><code class="sourceCode yaml"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spring</span><span class="kw">:</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">application</span><span class="kw">:</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> demo</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">server</span><span class="kw">:</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span></code></pre></div>
<h3 id="value-annotation">Value annotation</h3>
<p>The <span class="citation" data-cites="Value">@Value</span>
annotation is used to read the environment or application property value
in Java code. The syntax to read the property value is shown below:</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Value</span><span class="op">(</span><span class="st">&quot;${spring.application.name}&quot;</span><span class="op">)</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="bu">String</span> applicationName<span class="op">;</span></span></code></pre></div>
<h2 id="spring-profiles">Spring Profiles</h2>
<p>Spring boot supports different properties based on the Spring active
profile. For example we can keep two separate files for development and
production to run the Spring Boot application, or we can also use
multi-document setup in the same file, in a regular yml file it is
possible to separate different documents using the <code>---</code>
atom, which is the equivalent of having different / separate files.</p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode yml"><code class="sourceCode yaml"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure that the logging is active for all profiles by default, we are using the INFO level, which means that we</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># will be logging everything above and including INFO level, that implies - INFO, WARN, ERROR.</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">logging</span><span class="kw">:</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">level</span><span class="kw">:</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">com.spring.demo.core</span><span class="kw">:</span><span class="at"> INFO</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co"># this is the base document, or the default one which will be picked up by spring, anything defined here can be</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># overridden with specific active profile configuration</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="fu">spring</span><span class="kw">:</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">application</span><span class="kw">:</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> demo-base</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="fu">spring</span><span class="kw">:</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">application</span><span class="kw">:</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> demo-local</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">config</span><span class="kw">:</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">activate</span><span class="kw">:</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="co">      # this tells spring that this document will be only active if the current profile that is active is called `local`, in</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="co">      # that case this file / document will be merged with the base config</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">on-profile</span><span class="kw">:</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> local</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>The other traditional option that spring provides is separate files,
each file has to include the name of the active profile in its name -
<code>application, application-local, application-dev</code>, where the
active properties will be, respectively in order - the profiles
<code>default , local and dev</code>. The default profile is always
active.</p>
<p>While running the JAR file, we need to specify the spring active
profile based on each properties file. By default, Spring Boot
application uses the application.properties file. The command to set the
spring active profile is shown below:</p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> java <span class="at">-jar</span> <span class="op">&lt;</span>demo-application<span class="op">&gt;</span>.jar <span class="at">--spring.profiles.active</span><span class="op">=</span>dev</span></code></pre></div>
<pre class="plaintext"><code>2017-11-26 08:13:16.322 INFO 14028 --- [ main]
com.tutorialspoint.demo.DemoApplication : The following profiles are active:
dev</code></pre>
<h2 id="spring-logging">Spring Logging</h2>
<p>Spring Boot uses Apache Commons logging for all internal logging.
Spring Boot’s default configurations provides a support for the use of
Java Util Logging, Log4j2, and Logback. Using these, we can configure
the console logging as well as file logging.</p>
<p>If you are using Spring Boot Starters, Logback will provide a good
support for logging. Besides, Logback also provides a use of good
support for Common Logging, Util Logging, Log4J, and SLF4J.</p>
<p>The default log messages will print to the console window. By
default, “INFO”, “ERROR” and “WARN” log messages will print in the log
file.</p>
<pre class="plaintext"><code>[INFO] +- org.springframework.boot:spring-boot-starter-logging:jar:3.5.3:compile
[INFO] |  +- ch.qos.logback:logback-classic:jar:1.5.18:compile
[INFO] |  |  +- ch.qos.logback:logback-core:jar:1.5.18:compile
[INFO] |  |  \- org.slf4j:slf4j-api:jar:2.0.17:compile
[INFO] |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.24.3:compile
[INFO] |  |  \- org.apache.logging.log4j:log4j-api:jar:2.24.3:compile
[INFO] |  \- org.slf4j:jul-to-slf4j:jar:2.0.17:compile</code></pre>
<h3 id="slf4j-simple-logging-facade-for-java">SLF4J (Simple Logging
Facade for Java)</h3>
<ul>
<li><strong>Role</strong>: Abstraction layer (facade) over concrete
logging implementations.</li>
<li><strong>Purpose</strong>: Decouples your code from specific logging
frameworks.
<ul>
<li>Provides a unified API (e.g.,
<code>LoggerFactory.getLogger()</code>).</li>
<li>Allows switching implementations (Logback, Log4j2, etc.) without
code changes.</li>
</ul></li>
</ul>
<h3 id="logback">Logback</h3>
<ul>
<li><strong>Default in Spring Boot</strong>.
<ul>
<li>Native SLF4J implementation (no adapter needed).</li>
<li>Fast, flexible configuration via <code>logback.xml</code>.</li>
</ul></li>
</ul>
<h3 id="log4j2">Log4j2</h3>
<ul>
<li><strong>Successor to Log4j 1.x</strong>.</li>
<li><strong>Strengths</strong>:
<ul>
<li>High performance (asynchronous logging).</li>
<li>Advanced features (JSON/YAML config, plugins).</li>
</ul></li>
</ul>
<h3 id="java.util.logging-jul">java.util.logging (JUL)</h3>
<ul>
<li><strong>Built into the JVM</strong>.
<ul>
<li>Limited features, poor performance.</li>
<li>Rarely used directly (SLF4J bridges exist).</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb55"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">slf4j</span><span class="op">.</span><span class="im">Logger</span><span class="op">;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Logger</span> logger <span class="op">=</span> LoggerFactory<span class="op">.</span><span class="fu">getLogger</span><span class="op">(</span>MyClass<span class="op">.</span><span class="fu">class</span><span class="op">);</span> <span class="co">// SLF4J API</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>logger<span class="op">.</span><span class="fu">info</span><span class="op">(</span><span class="st">&quot;Hello&quot;</span><span class="op">);</span> <span class="co">// Delegates to the implementation Logback/Log4j2</span></span></code></pre></div>
<div class="sourceCode" id="cb56"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">groupId</span>&gt;org.springframework.boot&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">artifactId</span>&gt;spring-boot-starter-logging&lt;/<span class="kw">artifactId</span>&gt; <span class="co">&lt;!-- Logback --&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">dependency</span>&gt;</span></code></pre></div>
<p>To use the <code>log4j2</code> Replace the starter dependency with
<code>spring-boot-starter-log4j2</code>.</p>
<p>By default, all logs will print on the console window and not in the
files. If you want to print the logs in a file, you need to set the
property <strong>logging.file</strong> or <strong>logging.path</strong>
in the application.properties file.</p>
<p>You can specify the log file path using the property shown below.
Note that the log file name is spring.log.</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode yml"><code class="sourceCode yaml"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we have to provide the name of the log file, and path, by default these values are not set, thus no file logging is</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># performed but it is a good practice in production to make sure both are explicitly provided, and have a persistent log location,</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># note that this is using a relative path, the file will be created in the current working directory where the jar was run, the</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># reason being is that depending on your system, paths like /tmp or /var might not be accessible to the process running the jar,</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># and the log file will never be created, so make sure that your process has the permissions to read/write at the file.path location</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="at">logging.file.path=./tmp/</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="at">logging.file.name=spring.log</span></span></code></pre></div>
<p>To modify the log levels, for all packages we can use the
<code>root</code> prefix, this will enable logging levels for every
package in the classpath, however it is possible to provide a more
granular logging based on a specific package or even an entire
sub-package.</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode yml"><code class="sourceCode yaml"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logging</span><span class="kw">:</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">level</span><span class="kw">:</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="at">        root=ERROR</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="at">        com.my.package=TRACE</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">org.springframework.web</span><span class="kw">:</span><span class="at"> DEBUG</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">org.hibernate.SQL</span><span class="kw">:</span><span class="at"> DEBUG</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">org.hibernate.type</span><span class="kw">:</span><span class="at"> TRACE</span></span></code></pre></div>
<h2 id="usage-example">Usage example</h2>
<p>Here is a more advanced and complete example using the different
options we have looked at such as logging, configurations, properties
and injection</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> com</span><span class="op">.</span><span class="im">spring</span><span class="op">.</span><span class="im">demo</span><span class="op">.</span><span class="im">config</span><span class="op">;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">slf4j</span><span class="op">.</span><span class="im">Logger</span><span class="op">;</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">slf4j</span><span class="op">.</span><span class="im">LoggerFactory</span><span class="op">;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">beans</span><span class="op">.</span><span class="im">factory</span><span class="op">.</span><span class="im">annotation</span><span class="op">.</span><span class="im">Value</span><span class="op">;</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">context</span><span class="op">.</span><span class="im">annotation</span><span class="op">.</span><span class="im">Bean</span><span class="op">;</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">context</span><span class="op">.</span><span class="im">annotation</span><span class="op">.</span><span class="im">Configuration</span><span class="op">;</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="at">@Configuration</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> DefaultDemoAutoConfiguration <span class="op">{</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">Logger</span> LOGGER <span class="op">=</span> LoggerFactory<span class="op">.</span><span class="fu">getLogger</span><span class="op">(</span>DefaultDemoAutoConfiguration<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">DefaultDemoAutoConfiguration</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>        LOGGER<span class="op">.</span><span class="fu">info</span><span class="op">(</span><span class="st">&quot;Creating the auto configuration bean DefaultDemoAutoConfiguration&quot;</span><span class="op">);</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Bean</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>    DefaultAutoConfigBean <span class="fu">defaultBeanFromAutoConfig</span><span class="op">(</span><span class="at">@Value</span><span class="op">(</span><span class="st">&quot;${spring.application.name}&quot;</span><span class="op">)</span> <span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>        LOGGER<span class="op">.</span><span class="fu">info</span><span class="op">(</span><span class="st">&quot;Initializing DefaultAutoConfigBean&quot;</span><span class="op">);</span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="fu">DefaultAutoConfigBean</span><span class="op">(</span>name<span class="op">);</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="kw">class</span> DefaultAutoConfigBean <span class="op">{</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> <span class="fu">DefaultAutoConfigBean</span><span class="op">(</span><span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>            LOGGER<span class="op">.</span><span class="fu">info</span><span class="op">(</span><span class="st">&quot;Running DefaultAutoConfigBean constructor for {}&quot;</span><span class="op">,</span> name<span class="op">);</span></span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="restful-services">Restful services</h1>
<p>Before you proceed to build a RESTful web service, it is suggested
that you have knowledge of the following annotations: The
<code>@RestController</code> annotation is used to define the RESTful
web services. It serves JSON, XML and custom response. Its syntax is
shown below:</p>
<div class="sourceCode" id="cb60"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RestController</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> ProductServiceController <span class="op">{</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="request-mapping">Request Mapping</h2>
<p>The <code>@RequestMapping</code> annotation is used to define the
Request URI to access the REST Endpoints. We can define Request method
to consume and produce object. The default request method is GET.
However the annotation itself has a field that can be used to specify
the type - GET, POST, DELETE etc. All major METHOD types are supported
out of the box. There are dedicated annotations which are called
<code>PostMapping</code>, <code>GetMapping</code>,
<code>DeleteMapping</code> and so forth, which are preferred over the
plain direct usage of the <code>RequestMapping</code> annotation</p>
<div class="sourceCode" id="cb61"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span>value<span class="op">=</span><span class="st">&quot;/products&quot;</span><span class="op">)</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProducts</span><span class="op">()</span> <span class="op">{</span> <span class="op">}</span></span></code></pre></div>
<h2 id="request-body">Request Body</h2>
<p>The <code>@RequestBody</code> annotation is used to define the
request body content type. This is relevant when the request method in
question is of type that is different than GET, in those cases it is
possible to send payload to the Servlet. The payload in this case will
be automatically de-serialized into the Product POJO, however if there
are types mismatch present between the types of the fields or properties
of the Product POJO then an error would be thrown.</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span>method<span class="op">=</span>RequestMethod<span class="op">.</span><span class="fu">POST</span><span class="op">,</span> value<span class="op">=</span><span class="st">&quot;/products&quot;</span><span class="op">)</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">createProduct</span><span class="op">(</span><span class="at">@RequestBody</span> Product product<span class="op">)</span> <span class="op">{</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>This example shows how we can read in an ambiguous set of values and
fields from the request instead of having a dedicated java class that
defines the fields, this is possible due to the usage of the Object in
the map which is polymorphic at runtime. The de-serialized values in the
Map would Object instances, but actually be de-serialized values of
class primitives such as Integer, String, Byte, Boolean etc.</p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span>method<span class="op">=</span>RequestMethod<span class="op">.</span><span class="fu">POST</span><span class="op">,</span> value<span class="op">=</span><span class="st">&quot;/products2&quot;</span><span class="op">)</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">createProductMap</span><span class="op">(</span><span class="at">@RequestBody</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> product<span class="op">)</span> <span class="op">{</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="path-variable">Path Variable</h2>
<p>The <code>@PathVariable</code> annotation is used to define the
custom or dynamic request URI. The Path variable in request URI is
defined as curly braces {} as shown below. This would inject the value
of the templated entry in the path string in this case called {id} into
the method argument, when the request is received, which would allow you
to dynamically read a request value from the path. Take a good note of
the name of the argument in the annotation - <code>id</code>, this has
to match the value in the brackets. It is also possible to skip the
value in the <code>@PathVariable</code> annotation, and the name would
be inferred from the name of the argument of the function, this however
is only possible if the jar is compiled with the -parameter option
passed to the compiler, that would tell the compiler to retain the name
of the arguments at runtime, making them accessible to the annotation
processor that injects the value into the arguments of the function, by
reading their names</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span>method<span class="op">=</span>RequestMethod<span class="op">.</span><span class="fu">GET</span><span class="op">,</span> value<span class="op">=</span><span class="st">&quot;/products/{id}&quot;</span><span class="op">)</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">updateProduct</span><span class="op">(</span><span class="at">@PathVariable</span><span class="op">(</span><span class="st">&quot;id&quot;</span><span class="op">)</span> <span class="bu">String</span> id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="request-parameter">Request Parameter</h2>
<p>The <code>@RequestParam</code> annotation is used to read the request
parameters from the Request URL. By default, it is a required parameter.
We can also set default value for request parameters as shown here:</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">// one would be able to call this GET endpoint such as follows schema://hostname/products?name=product-name, the query</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co">// parameter is optional meaning that a call will match without it being present, and a value will be defined by default if</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co">// there is no value provided</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span>method<span class="op">=</span>RequestMethod<span class="op">.</span><span class="fu">GET</span><span class="op">,</span> value<span class="op">=</span><span class="st">&quot;/products&quot;</span><span class="op">)</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProduct</span><span class="op">(</span><span class="at">@RequestParam</span><span class="op">(</span>value<span class="op">=</span><span class="st">&quot;name&quot;</span><span class="op">,</span> required<span class="op">=</span><span class="kw">false</span><span class="op">,</span> defaultValue<span class="op">=</span><span class="st">&quot;honey&quot;</span><span class="op">)</span> <span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="request-header">Request Header</h2>
<p>While a request is being built by the client it is possible to
construct a custom header that can be passed in the header section of
the HTTP payload, this header has a name and a value, in our case the
name is <code>x-product-name</code> note that the header names are
<strong><code>not case sensitive</code></strong>, the values in there
are usually primitive strings, numbers or boolean types.</p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span>method<span class="op">=</span>RequestMethod<span class="op">.</span><span class="fu">GET</span><span class="op">,</span> value<span class="op">=</span><span class="st">&quot;/products&quot;</span><span class="op">)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProduct</span><span class="op">(</span><span class="at">@RequestHeader</span><span class="op">(</span><span class="st">&quot;X-Product-Name&quot;</span><span class="op">)</span> <span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="request-attribute">Request Attribute</h2>
<p>The request attribute, is an internal construct that is attached to
the request by the Servlet processor, as early as the request being
captured by the web server, usually in the real world a special filter
or interceptor might add some request attribute to the request before it
reaches the method call in the restful controller, this can then be used
to do some further processing, this usually can happen based on some
business logic, or in the example below, based on some other properties
found in the http request sent by the client.</p>
<div class="sourceCode" id="cb67"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">// based on some business logic a special attribute might be added to the request before it reaches the controller method</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="co">// in our example we `imagine` that a special discount value will be added based on some heuristic calculated from the</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co">// client request payload.</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span>method<span class="op">=</span>RequestMethod<span class="op">.</span><span class="fu">GET</span><span class="op">,</span> value<span class="op">=</span><span class="st">&quot;/products&quot;</span><span class="op">)</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span>AuditLog<span class="op">&gt;</span> <span class="fu">getProducts</span><span class="op">(</span><span class="at">@RequestAttribute</span><span class="op">(</span><span class="st">&quot;discount&quot;</span><span class="op">)</span> <span class="bu">Double</span> discount<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="controller-example">Controller example</h2>
<div class="sourceCode" id="cb68"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RestController</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> ProductsController <span class="op">{</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">@PostMapping</span><span class="op">(</span><span class="st">&quot;/products-body&quot;</span><span class="op">)</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProductsQuery</span><span class="op">(</span><span class="at">@RequestBody</span> ProductResourceRecord product<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">of</span><span class="op">(</span>Optional<span class="op">.</span><span class="fu">ofNullable</span><span class="op">(</span>product<span class="op">));</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">@GetMapping</span><span class="op">(</span><span class="st">&quot;/products-header&quot;</span><span class="op">)</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProductsHeader</span><span class="op">(</span><span class="at">@RequestHeader</span><span class="op">(</span><span class="st">&quot;name&quot;</span><span class="op">)</span> <span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">of</span><span class="op">(</span>Optional<span class="op">.</span><span class="fu">ofNullable</span><span class="op">(</span>name<span class="op">));</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">@GetMapping</span><span class="op">(</span><span class="st">&quot;/products-query&quot;</span><span class="op">)</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProductsQuery</span><span class="op">(</span><span class="at">@RequestParam</span><span class="op">(</span><span class="st">&quot;name&quot;</span><span class="op">)</span> <span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">of</span><span class="op">(</span>Optional<span class="op">.</span><span class="fu">ofNullable</span><span class="op">(</span>name<span class="op">));</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">@GetMapping</span><span class="op">(</span><span class="st">&quot;/products-path/{id}&quot;</span><span class="op">)</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProductsPath</span><span class="op">(</span><span class="at">@PathVariable</span><span class="op">(</span><span class="st">&quot;id&quot;</span><span class="op">)</span> <span class="bu">String</span> id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">of</span><span class="op">(</span>Optional<span class="op">.</span><span class="fu">ofNullable</span><span class="op">(</span>id<span class="op">));</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">@GetMapping</span><span class="op">(</span><span class="st">&quot;/products-discount&quot;</span><span class="op">)</span></span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProductsDiscount</span><span class="op">(</span><span class="at">@RequestAttribute</span><span class="op">(</span><span class="st">&quot;discount&quot;</span><span class="op">)</span> <span class="bu">Double</span> discount<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">of</span><span class="op">(</span>Optional<span class="op">.</span><span class="fu">ofNullable</span><span class="op">(</span>discount<span class="op">));</span></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<pre class="http"><code>### 1. POST with @RequestBody
POST http://localhost:8080/products-body
Content-Type: application/json

{
    &quot;id&quot;: &quot;laptop&quot;,
    &quot;name&quot;: &quot;Laptop&quot;,
}

### 2. GET with @RequestHeader
GET http://localhost:8080/products-header
name: PremiumCustomer

### 3. GET with @RequestParam
GET http://localhost:8080/products-query?name=Smartphone

### 4. GET with @PathVariable
GET http://localhost:8080/products-path/12345

### 5. GET with @RequestAttribute (requires server-side setup)
GET http://localhost:8080/products-discount</code></pre>
<h1 id="handling-exceptions">Handling exceptions</h1>
<p>Handling exceptions and errors in API, and sending the proper
responses to the client is good for enterprise application, in this
chapter we will learn how to handle the exceptions in spring boot,
before proceeding with exception handling let us gain an understanding
on the following annotations:</p>
<h2 id="controlleradvice"><span class="citation"
data-cites="ControllerAdvice">@ControllerAdvice</span></h2>
<p>This annotation is used to handle the exceptions globally. What it
does it create an advice - an advice is a type of functionality that is
wrapped around a certain functionality, when you a controller method is
triggered, a certain code can be executed before or after or around the
execution of this method.</p>
<div class="sourceCode" id="cb70"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">getProducts</span><span class="op">()</span> <span class="op">{}</span></span></code></pre></div>
<p>If we assume we have this method present in our controller, the
Advice can be called right before the method is called, right after the
method exits or/and both could be done as well. Meaning that we can do
some generic work before or/and after the method execution.</p>
<p>In the most general use case that can be used to catch exceptions in
a single location no mater which controller method was called. This is
useful when used in conjunction with the <code>@ExceptionHandler</code>
annotation.</p>
<h2 id="exceptionhandler"><span class="citation"
data-cites="ExceptionHandler">@ExceptionHandler</span></h2>
<p>This annotation is used to handle the specific exceptions, what it
does is annotate a method inside a class annotated with
<code>@ControllerAdvice</code>, that method will be called when a
specific exception of a specific type is emitted from a controller
method.</p>
<p>The advice is usually implemented internally with a library like
<code>aspectj</code>, which allows us to inject at either runtime
(through a proxy object) or compile time (by literally writing byte code
during compile time) additional code around a certain construct like -
method, constructor etc. The <code>ControllerAdvice</code> and the
<code>ExceptionHandler</code> are provided by Spring to simplify the
process.</p>
<div class="sourceCode" id="cb71"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">// we create an advice for controllers, this annotation will pick up this class and create an advice handler wrapped</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co">// around all methods in classes marked with RestController in our module, it could look something like that, in pseudo code:</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co">// try {</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co">//     return productController.getProducts();</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co">// } catch(Throwable e) {</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co">//     for handler in handlers {</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co">//         if e instanceOf handler.getException() {</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co">//             handler.executeExceptionHandlerMethod();</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co">//         }</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="co">//     }</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="co">// }</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="at">@ControllerAdvice</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> ProductExceptionController <span class="op">{</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">@ExceptionHandler</span><span class="op">(</span>value <span class="op">=</span> ProductNotfoundException<span class="op">.</span><span class="fu">class</span><span class="op">)</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">exception</span><span class="op">(</span>ProductNotfoundException exception<span class="op">)</span> <span class="op">{</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>        <span class="co">// handle the specific exception, if another exception is triggered this method will not be called, the</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">// ExceptionHandler specifically handles only this type of exception and ignores others, if you wish to be more</span></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// generic you could create another method, annotated with - @ExceptionHandler(value = RuntimeException.class)</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</body>
</html>
