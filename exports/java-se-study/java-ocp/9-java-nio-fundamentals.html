<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>9-java-nio-fundamentals</title>
  <style>
    html {
      font-size: 12pt;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  \usepackage{listings}
  \usepackage{xcolor}

  \lstset{
      basicstyle=\ttfamily,
      backgroundcolor=\color{black!10},
      showspaces=false,
      showstringspaces=false,
      showtabs=false,
      tabsize=2,
      captionpos=b,
      breaklines=true,
      breakautoindent=true,
      linewidth=\textwidth
  }
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#nio-streams" id="toc-nio-streams">NIO Streams</a>
<ul>
<li><a href="#path" id="toc-path">Path</a>
<ul>
<li><a href="#information" id="toc-information">Information</a></li>
<li><a href="#comparison" id="toc-comparison">Comparison</a></li>
</ul></li>
<li><a href="#files" id="toc-files">Files</a></li>
<li><a href="#metadata" id="toc-metadata">Metadata</a></li>
<li><a href="#copying" id="toc-copying">Copying</a></li>
<li><a href="#moving" id="toc-moving">Moving</a></li>
<li><a href="#deleting" id="toc-deleting">Deleting</a></li>
<li><a href="#notes" id="toc-notes">Notes</a></li>
<li><a href="#streaming" id="toc-streaming">Streaming</a>
<ul>
<li><a href="#list" id="toc-list">List</a></li>
<li><a href="#find" id="toc-find">Find</a></li>
<li><a href="#lines" id="toc-lines">Lines</a></li>
</ul></li>
</ul></li>
<li><a href="#summary" id="toc-summary">Summary</a></li>
</ul>
</nav>
<h1 id="nio-streams">NIO Streams</h1>
<p>Java offers a rich set of <code>APIs</code> one can use to manipulate
files and directories. Java 7 introduced a set of IO <code>APIs</code>
called <code>NIO.2</code> which stands for - New I/O. It offered
convenient ways to perform operations related to a file system. In Java
8 they can also be sued along the Stream API.</p>
<h2 id="path">Path</h2>
<p>All file systems usually form a tree. The file system starts with a
root directory that contains files and directories. Each directory in
turn may have sub-directories or hold files. To locate a file one just
needs to put together the directories from the root directory to the
immediate directory containing the file, along with the file name, with
a correct file separator. This forms the unique resource name or
identifier for the file resource on disk - URN. A path can be absolute
or relative. The Absolute path always starts from the root directory,
the relative, is well relative to the current working directory or path
(that could really mean many things, but in general when a program or a
process is executing, it is always started or bound to a certain file
system directory by the operating system itself, it also has a way of
obtaining the current working directory, which itself is always an
absolute path from the root).</p>
<p>Another important mention, is symbolic links. A symbolic link is like
a pointer or reference to an actual file. In general symbolic link are
transparent to applications, which means operations are performed
directly on the files rather than on the links (except certain mutation
operations such as deleting or moving), they are also referred to as
<code>sym links</code> in practice.</p>
<p>The path interface is a programming abstraction for a path. A path
objects contains the names of directories and files that form the full
path of the file/directory represented by the Path object; the Path
abstraction provides methods to extract path elements, manipulate them
and append them.</p>
<p>See later that almost all the methods that access files/directories
to get information about them or manipulate them use Path objects. The
new <code>path</code> interface, is the corner stone of the NIO library,
and is the building block of pretty much the entire API</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Path getRoot()</td>
<td>Returns a Path object representing the root of the given path, or
null if the path does not have a root.</td>
</tr>
<tr class="even">
<td>Path getFileName()</td>
<td>Returns the file name or directory name of the given path. Note that
the file/directory name is the last element or name in the given
path.</td>
</tr>
<tr class="odd">
<td>Path getParent()</td>
<td>Returns the Path object representing the parent of the given path,
or null if no parent component exists for the path. int getNameCount()
Returns the number of file/directory names in the given path; returns 0
if the given path represents the root.</td>
</tr>
<tr class="even">
<td>Path getName(int index)</td>
<td>Returns the ith file/directory name; the index 0 starts from closest
name to the root.</td>
</tr>
<tr class="odd">
<td>Path subpath(int beginIndex, int endIndex)</td>
<td>Returns a Path object that is part of this Path object; the returned
Path object has a name that begins at beginIndex and ends with the
element at index endIndex - 1. In other words, beginIndex is inclusive
of the name in that index and exclusive of the name in endIndex. This
method may throw IllegalArgumentException if beginIndex is &gt;= number
of elements, or endIndex &lt;= beginIndex, or endIndex &gt; number of
elements.</td>
</tr>
<tr class="even">
<td>Path normalize()</td>
<td>Removes redundant elements in the path, such as . (dot symbol that
indicates the current directory) and .. (double-dot symbol that
indicates the parent directory).</td>
</tr>
<tr class="odd">
<td>Path resolve(Path other)</td>
<td>Resolves a path against the given path. For example, this method can
combine the given path with the other path and return the resulting
path.</td>
</tr>
<tr class="even">
<td>Boolean isAbsolute()</td>
<td>Returns true if the given path is an absolute path; returns false if
not (when the given path is a relative path, for example).</td>
</tr>
<tr class="odd">
<td>Path startsWith(Path path)</td>
<td>Returns true if this Path object starts with the given path, or
false otherwise.</td>
</tr>
<tr class="even">
<td>Path toAbsolutePath()</td>
<td>Returns the absolute path.</td>
</tr>
</tbody>
</table>
<h3 id="information">Information</h3>
<p>In the following example it is shown how to obtain the full
information for a given path, which points to some test file, on the D
drive (Windows)</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create a Path object by calling static method get() in Paths class</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>Path testFilePath <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;D:</span><span class="sc">\\</span><span class="st">test</span><span class="sc">\\</span><span class="st">testfile.txt&quot;</span><span class="op">);</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">// retrieve basic information about path</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Printing file information: &quot;</span><span class="op">);</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st"> file name: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">getFileName</span><span class="op">());</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st"> root of the path: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">getRoot</span><span class="op">());</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st"> parent of the target: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">getParent</span><span class="op">());</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">// print path elements, path implements Iterable interface</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Printing elements of the path: &quot;</span><span class="op">);</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span><span class="op">(</span>Path element <span class="op">:</span> testFilePath<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st"> path element: &quot;</span> <span class="op">+</span> element<span class="op">);</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The output of this might look something like that, note that the path
elements are printed from top to bottom, in this case there are only 2
elements, the root drive is not included. The path instance is obtained
through the <code>Paths</code> utility class, calling the
<code>get</code> static final method, which is passed the path location,
note that the <code>get</code> method, can accept varargs string
arguments, which are the path elements, so one can build a path from
elements as well as -
<code>Paths.get("D:", "test", "testfile.txt")</code></p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Printing file information:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    file name: testfile.txt</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    root of the path: D:\</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    parent of the target: D:\test</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>Printing elements of the path:</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    path element: test</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    path element: testfile.txt</span></code></pre></div>
<p>The example below shows how to obtain an object to a relative path,
based on where this program is started, the actual current path will be
used, and this is where the <code>Test</code> directory will be resoled
to point to i.e. - <code>&lt;current-absolute-path&gt;\\Test</code>,
note that the call to <code>toRealPath</code> will fail, since the
<code>Test</code> directory probably does not exist, and
<code>toRealPath</code> tries to resolve the real path to this
directory, when it does not exist, it will throw an exception.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// get a path object with relative path</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>Path testFilePath <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;.</span><span class="sc">\\</span><span class="st">Test&quot;</span><span class="op">);</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;The file name is: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">getFileName</span><span class="op">());</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Its URI is: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">toUri</span><span class="op">());</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Its absolute path is: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">toAbsolutePath</span><span class="op">());</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Its normalized path is: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">normalize</span><span class="op">());</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">// get another path object with normalized relative path</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>Path testPathNormalized <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span>testFilePath<span class="op">.</span><span class="fu">normalize</span><span class="op">().</span><span class="fu">toString</span><span class="op">());</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Its normalized absolute path is: &quot;</span> <span class="op">+</span> testPathNormalized<span class="op">.</span><span class="fu">toAbsolutePath</span><span class="op">());</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Its normalized real path is: &quot;</span> <span class="op">+</span> testFilePath<span class="op">.</span><span class="fu">toRealPath</span> <span class="op">(</span>LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">));</span></span></code></pre></div>
<p>Note the exception coming from calling the last method which is the
<code>toRealPath</code>, already mentioned why this is happening above.
Also take a note at how the different paths are printed out, The
<code>URI</code> and absolute path include the slash and the dot,
however the normalized absolute path does not, this is why it is usually
a good practice to normalize a path, especially if it is derived from
user input, before any work is done on it.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>The file name is: Test</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Its URI is: file:///D:/OCPJP/programs/NIO2/./Test</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>Its absolute path is: D:\OCPJP\programs\NIO2\.\Test</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>Its normalized path is: Test</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>Its normalized absolute path is: D:\OCPJP\programs\NIO2\Test</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>Exception in thread &quot;main&quot; java.nio.file.NoSuchFileException: D:\OCPJP\programs\NIO2\Test</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    [... stack trace elided ...]</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    at PathInfo2.main(PathInfo2.java:16)</span></code></pre></div>
<p><code>The toPath() method in java.io.File class returns the Path object this method was added in Java 7. Similarly one can use the toFile() method in the Path interface to get a File object, this is one of the many bridges between the old IO and the NIO which Java provides out of the box</code></p>
<h3 id="comparison">Comparison</h3>
<p>The Path interface provides two methods to compare Path objects
<code>equals()</code> and <code>compareTo()</code>. The
<code>equals()</code> method checks the equality of two Path objects and
returns <code>true or false</code> the <code>compareTo()</code> compares
two Path objects character by character and returns and integer 0 - if
Paths are equal, or negative integer if this path is
<code>lexicographically</code> less than the parameter path; and a
positive integer if the path is <code>lexicographically</code> greater
than the parameter path.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Path path1 <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;Test&quot;</span><span class="op">);</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>Path path2 <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;D:</span><span class="sc">\\</span><span class="st">OCPJP</span><span class="sc">\\</span><span class="st">programs</span><span class="sc">\\</span><span class="st">NIO2</span><span class="sc">\\</span><span class="st">Test&quot;</span><span class="op">);</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">// comparing two paths using compareTo() method</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;(path1.compareTo(path2) == 0) is: &quot;</span> <span class="op">+</span> <span class="op">(</span>path1<span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>path2<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">));</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">// comparing two paths using equals() method</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;path1.equals(path2) is: &quot;</span> <span class="op">+</span> path1<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>path2<span class="op">));</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">// comparing two paths using equals() method with absolute path</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;path2.equals(path1.toAbsolutePath()) is &quot;</span> <span class="op">+</span> path2<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>path1<span class="op">.</span><span class="fu">toAbsolutePath</span><span class="op">()));</span></span></code></pre></div>
<p>Assume that the current directory/working directory from where this
program is invoked is exactly <code>D:\\OCPJP\\programs\\NIO2\\</code>,
the equal checks below will provide the following output. Note that
comparing the actual path1 and Path2 yields results which imply they are
not equal, however once the relative path is converted to an absolute
path, then the equal check is passing fine. This is because the Path
does not make any assumptions, which are hidden away from the API
consumer. Even though semantically and logically those paths are indeed
the <code>same</code> even though one is relative the other not, the
Path instances, data fields do not hold the <code>same</code> path, that
is why the methods rightfully return the results they do. Which is a
good design, one would not want the library to make broad assumptions,
such that it would have considered both the relative and absolute path
equal.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(path1.compareTo(path2) == 0) is: false</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>path1.equals(path2) is: false</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>path2.equals(path1.toAbsolutePath()) is true</span></code></pre></div>
<h2 id="files">Files</h2>
<p>The previous sections discussed how to create and work with Path
instance, and extract useful information from it. In this section Path
objects are used to manipulate files or directories. Ava 7 offers Files
class (in the java.nio.file package). Those can be used to perform
various file related operations on files or directories. Note that Files
is a utility class, meaning it is final class with private constructor
and consists only of static methods. So you can use the Files class by
calling the static methods it provides, such as copy() to copy files.
This class provides a wide range of functionality.</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Path createDirectory(Path dirPath, FileAttribute&lt;?&gt;… dirAttrs)
<br> Path createDirectories(Path dir, FileAttribute&lt;?&gt;…
attrs)</td>
<td>Creates a file given by the dirPath, and sets the attributes given
by dirAttributes. May throw an exception such as
FileAlreadyExistsException or UnsupportedOperationException (for
example, when the file attributes cannot be set as given by dirAttrs).
The difference between createDirectory and createDirectories is that
createDirectories creates intermediate directories given by dirPath if
they are not already present.</td>
</tr>
<tr class="even">
<td>Path createTempFile(Path dir, String prefix, String suffix,
FileAttribute&lt;?&gt;… attrs)</td>
<td>Creates a temporary file with the given prefix, suffix, and
attributes in the directory given by dir.</td>
</tr>
<tr class="odd">
<td>Path createTempDirectory(Path dir, String prefix,
FileAttribute&lt;?&gt;… attrs)</td>
<td>Creates a temporary directory with the given prefix and directory
attributes in the path specified by dir.</td>
</tr>
<tr class="even">
<td>Path copy(Path source, Path target, CopyOption… options)</td>
<td>Copies the file from source to target. CopyOption can be
REPLACE_EXISTING, COPY_ATTRIBUTES, or NOFOLLOW_LINKS. Can throw
exceptions such as FileAlreadyExistsException.</td>
</tr>
<tr class="odd">
<td>Path move(Path source, Path target, CopyOption… options)</td>
<td>Similar to the copy operation, but the source file is removed. If
the source and target are in the same directory, it is a file-rename
operation.</td>
</tr>
<tr class="even">
<td>boolean isSameFile(Path path, Path path2)</td>
<td>Checks whether the two Path objects locate the same file.</td>
</tr>
<tr class="odd">
<td>boolean exists(Path path, LinkOption… options)</td>
<td>Checks whether a file/directory exists in the given path; can
specify LinkOption.NOFOLLOW_LINKS to not to follow symbolic links.</td>
</tr>
<tr class="even">
<td>Boolean isRegularFile(Path path, LinkOption…)</td>
<td>Returns true if the file represented by path is a regular file.</td>
</tr>
<tr class="odd">
<td>Boolean isSymbolicLink(Path path)</td>
<td>Returns true if the file represented by path is a symbolic
link.</td>
</tr>
<tr class="even">
<td>Boolean isHidden(Path path)</td>
<td>Return true if the file represented by path is a hidden file.</td>
</tr>
<tr class="odd">
<td>long size(Path path)</td>
<td>Returns the size of the file represented by path in bytes.</td>
</tr>
<tr class="even">
<td>UserPrincipal getOwner(Path path, LinkOption…) <br> Path
setOwner(Path path, UserPrincipal owner)</td>
<td>Gets/sets the owner of the file.</td>
</tr>
<tr class="odd">
<td>FileTime getLastModifiedTime(Path path, LinkOption…) <br> Path
setLastModifiedTime(Path path, FileTime time)</td>
<td>Gets/sets the last modified time for the specified file.</td>
</tr>
<tr class="even">
<td>Object getAttribute(Path path, String attribute, LinkOption…) <br>
Path setAttribute(Path path, String attribute, Object value,
LinkOption…)</td>
<td>Gets/sets the specified attribute of the specified file</td>
</tr>
</tbody>
</table>
<h2 id="metadata">Metadata</h2>
<p>To quickly check some basic file <code>metadata</code> on files. In
previous section the example which was trying to figure out if two paths
pointed to the same file. There is another way to do this in a more
robust way. To do that one can use the <code>isSameFile</code> method
instead.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Path path1 <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;Test&quot;</span><span class="op">);</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Path path2 <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;D:</span><span class="sc">\\</span><span class="st">OCPJP</span><span class="sc">\\</span><span class="st">programs</span><span class="sc">\\</span><span class="st">NIO2</span><span class="sc">\\</span><span class="st">Test&quot;</span><span class="op">);</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Files.isSameFile(path1, path2) is: &quot;</span> <span class="op">+</span> Files<span class="op">.</span><span class="fu">isSameFile</span><span class="op">(</span>path1<span class="op">,</span> path2<span class="op">));</span></span></code></pre></div>
<p>Notice that the first path is relative, to the current directory,
however the second one is an absolute one, now also assume that the
directory exists on disk. In case the file or directory does not exist
in the given path, an exception will occur
<code>NoSuchFileException</code>. There is an easy way to figure out if
a file or directory first exists on the disk. To do that one can use the
methods <code>isDirectory</code> or <code>exists</code>.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Path path <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;Test&quot;</span><span class="op">);</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span><span class="op">(</span>Files<span class="op">.</span><span class="fu">exists</span><span class="op">(</span>path<span class="op">,</span> LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;The file/directory &quot;</span> <span class="op">+</span> path<span class="op">.</span><span class="fu">getFileName</span><span class="op">()</span> <span class="op">+</span> <span class="st">&quot; exists&quot;</span><span class="op">);</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// check whether it is a file or a directory</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>Files<span class="op">.</span><span class="fu">isDirectory</span><span class="op">(</span>path<span class="op">,</span> LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>path<span class="op">.</span><span class="fu">getFileName</span><span class="op">()</span> <span class="op">+</span> <span class="st">&quot; is a directory&quot;</span><span class="op">);</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>path<span class="op">.</span><span class="fu">getFileName</span><span class="op">()</span> <span class="op">+</span> <span class="st">&quot; is a file&quot;</span><span class="op">);</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>In this example above, the path is first checked for existence, in
case it does exist, it can then be checked further if it points to a
directory or to a file, note that <code>exists</code> alone can not tell
if the path is directory or file, neither can the client of Path tell
that from the path itself. There are operating systems where both the
files and directories can have the same names, and many files have no
extensions, which means it is pretty hard to tell for sure, in a
reliable way if a given path is a file or directory.</p>
<p>These methods can be used to avoid exceptions being thrown and
handled in the code, which is generally a good practice. Further more to
check if one has access to read or access given file or directory, the
<code>isReadable</code> or <code>isWritable</code> methods can be used.
There is also a method to check if a path points to an executable
<code>isExecutable</code></p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Given the fact that the path here is a directory, which we would assume already exists, the readable and writable</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">// calls should return true, however executable will not</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>Path path <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;D:</span><span class="sc">\\</span><span class="st">OCPJP</span><span class="sc">\\</span><span class="st">programs</span><span class="sc">\\</span><span class="st">NIO2</span><span class="sc">\\</span><span class="st">Test&quot;</span><span class="op">);</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">printf</span><span class="op">(</span> <span class="st">&quot;Readable: </span><span class="sc">%b</span><span class="st">, Writable: </span><span class="sc">%b</span><span class="st">, Executable: </span><span class="sc">%b</span><span class="st"> &quot;</span><span class="op">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>Files<span class="op">.</span><span class="fu">isReadable</span><span class="op">(</span>path<span class="op">),</span> Files<span class="op">.</span><span class="fu">isWritable</span><span class="op">(</span>path<span class="op">),</span> Files<span class="op">.</span><span class="fu">isExecutable</span><span class="op">(</span>path<span class="op">));</span></span></code></pre></div>
<p>To obtain a broader view of the attributes of a file, the snippet
below obtains some of the more often used file or directory properties,
note that it is also possible to obtain OS specific properties such as
the dos:hidden one, which is in this case Windows specific.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Object</span> object <span class="op">=</span> Files<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>path<span class="op">,</span> <span class="st">&quot;creationTime&quot;</span><span class="op">,</span> LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">);</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Creation time: &quot;</span> <span class="op">+</span> object<span class="op">);</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>object <span class="op">=</span> Files<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>path<span class="op">,</span> <span class="st">&quot;lastModifiedTime&quot;</span><span class="op">,</span> LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Last modified time: &quot;</span> <span class="op">+</span> object<span class="op">);</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>object <span class="op">=</span> Files<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>path<span class="op">,</span> <span class="st">&quot;size&quot;</span><span class="op">,</span> LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">);</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Size: &quot;</span> <span class="op">+</span> object<span class="op">);</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>object <span class="op">=</span> Files<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>path<span class="op">,</span> <span class="st">&quot;dos:hidden&quot;</span><span class="op">,</span> LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">);</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;isHidden: &quot;</span> <span class="op">+</span> object<span class="op">);</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>object <span class="op">=</span> Files<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>path<span class="op">,</span> <span class="st">&quot;isDirectory&quot;</span><span class="op">,</span> LinkOption<span class="op">.</span><span class="fu">NOFOLLOW_LINKS</span><span class="op">);</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;isDirectory: &quot;</span> <span class="op">+</span> object<span class="op">);</span></span></code></pre></div>
<p>The tricky part of the example is the second parameter, of the
<code>getAttribute</code>. One needs to provide a correct attribute name
pattern to extract the associated value. The expected string should be
specified in view:attribute format, where view is the type of
<code>FileAttributeView</code>, and attribute is the name of attribute
supported by the view. If no view is specified it is assumed to be
basic. In this case the <code>creationTime</code>, size and
<code>isDirectory</code>, are base view type attributes, those are cross
OS. If the name of the view:attribute is wrong,
<code>UnsupportedOperationException</code> will be thrown</p>
<p>There is another way to read the attributes, in one shot of a given
file or directory element, instead of using the regular method to get
them one by one, and using the raw name of the attribute, the Java
library provides a way to extract all Basic or Operating System
dependent ones.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>BasicFileAttributes fileAttributes <span class="op">=</span> Files<span class="op">.</span><span class="fu">readAttributes</span><span class="op">(</span>path<span class="op">,</span> BasicFileAttributes<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;File size: &quot;</span> <span class="op">+</span> fileAttributes<span class="op">.</span><span class="fu">size</span><span class="op">());</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;isDirectory: &quot;</span> <span class="op">+</span> fileAttributes<span class="op">.</span><span class="fu">isDirectory</span><span class="op">());</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;isRegularFile: &quot;</span> <span class="op">+</span> fileAttributes<span class="op">.</span><span class="fu">isRegularFile</span><span class="op">());</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;isSymbolicLink: &quot;</span> <span class="op">+</span> fileAttributes<span class="op">.</span><span class="fu">isSymbolicLink</span><span class="op">());</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;File last accessed time: &quot;</span> <span class="op">+</span> fileAttributes<span class="op">.</span><span class="fu">lastAccessTime</span><span class="op">());</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;File last modified time: &quot;</span> <span class="op">+</span> fileAttributes<span class="op">.</span><span class="fu">lastModifiedTime</span><span class="op">());</span></span></code></pre></div>
<p>There are <code>PosixFileAttributes</code> and
<code>DosFileAttributes</code>. For <code>POSIX</code> and
<code>DOS</code> compliant OS-es, which can be used to obtain the OS
specific file attributes as well, however before that a check for the
current operating system type must be performed, so to use the correct
type of attribute types</p>
<h2 id="copying">Copying</h2>
<p>Copying a file is relatively straight forward, one can simply use the
<code>copy</code> method on the Files class, however note that the 3rd
argument to the copy method is the file copy flags or attribues, which
specify what to in case the file already exists and so on.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// imagine one runs the following on a given source - destination paths, to copy file from src to dst</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>Files<span class="op">.</span><span class="fu">copy</span><span class="op">(</span>pathSource<span class="op">,</span> pathDestination<span class="op">);</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">// doing the same call again, would yield FileAlreadyExistsException, this is because by default files will not be overridden</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>Files<span class="op">.</span><span class="fu">copy</span><span class="op">(</span>pathSource<span class="op">,</span> pathDestination<span class="op">);</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">// to force override the file even if it exists pass in a standard copy option operation to the 3rd argument of copy</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>Files<span class="op">.</span><span class="fu">copy</span><span class="op">(</span>pathSource<span class="op">,</span> pathDestination<span class="op">,</span> StandardCopyOption<span class="op">.</span><span class="fu">REPLACE_EXISTING</span><span class="op">);</span></span></code></pre></div>
<p>Note that if the destination is a directory path that does not exist,
<code>NoSuchFileException</code> will be thrown, the full destination
where the copy will occur must exist, if a file is to be copied, if a
directory is to be copied then the full location to the destination
without the target directory must exist</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>Assume that Test is a directory, then the source to be copied has to exist, along with the destination location in this case - D:\\OCPJP\\programs\\NIO2\\Deep\\Directory\\Location</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>source -&gt; D:\\OCPJP\\programs\\NIO2\\Test</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>dest -&gt; D:\\OCPJP\\programs\\NIO2\\Deep\\Directory\\Location\\TestCopy</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>Assume that test.txt is a file, then the source to be copied has to exist, along with the destination location in this csae - D:\\OCPJP\\programs\\NIO2\\Deep\\Directory\\Location</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>source -&gt; D:\\OCPJP\\programs\\NIO2\\test.txt</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>dest -&gt; D:\\OCPJP\\programs\\NIO2\\Deep\\Directory\\Location\\test-copy.txt</span></code></pre></div>
<p><code>Note that copy does not copy the files or directories contained in a directory, it will only copy the top-level directory not the files/directories contained within that directory. If you copy a directory using the copy method it does not copy the files or directories contained inside the source directory, they have to be copied recursively/explictily</code></p>
<h2 id="moving">Moving</h2>
<p>Moving a file is similar to copying, however it is somewhat different
as well, first it is similar to copy operation because it has to take
into account that if another file or directory already exists in that
location, explicit replacing strategy has to be provided to the move
method, otherwise it will fail.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// provide explicit instructions to replace the destination if it already exists, otherwise exception will be thrown, FileAlreadyExistsException</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>Files<span class="op">.</span><span class="fu">move</span><span class="op">(</span>pathSource<span class="op">,</span> pathDestination<span class="op">,</span> StandardCopyOption<span class="op">.</span><span class="fu">REPLACE_EXISTING</span><span class="op">);</span></span></code></pre></div>
<ul>
<li><p>if a syn-link is being moved, the symbolic-link will be moved not
the file or directory itself, there is a way to move the file itself, by
suing the FOLLOW_LINKS option instead.</p></li>
<li><p>a non empty directory can be moved if moving the directory does
not require moving the containing files or directories, for instance
moving a directory from one location to another may be unsuccessful if
moving directory is successful then all the contained files and
directories are moved too.</p></li>
<li><p>move can be specified as an atomic operation, ATOMIC_MOVE copy
option, with this option either the entire move completes successfully
or the source continues to be present, and not moved, if move is not
performed as atomic operation, and it fails while in process of moving,
the state of both files or directories is unknown, and
undefined</p></li>
</ul>
<h2 id="deleting">Deleting</h2>
<p>The Files class provides a delete method as well. To delete a file
directory or symbolic link. There are few points to remember about
deleting, especially a directory, the delete method should be invoked on
an empty directory, otherwise it will fail. In the case of a symbolic
link, the link is deleted not the target file of the link. The file or
directory intend to be deleted must exist otherwise a
<code>NoSuchFileException</code> will be thrown. To silently delete one
can instead use the <code>deleteIfExists</code> method, which does not
complain if the file does not exist and deletes the file if it exists.
Also if a file is read-only on some platforms may prevent you from
deleting the file</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// the API of the delete method is quite simple, it accepts only the path target to be deleted, no other options or</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">// actions can be passed to this method or the deleteIfExists one</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>Files<span class="op">.</span><span class="fu">delete</span><span class="op">(</span>pathSource<span class="op">);</span></span></code></pre></div>
<h2 id="notes">Notes</h2>
<p>Some general notes, in relation to the classes already reviewed</p>
<ul>
<li><p>Do not confuse File with Files and Path with Paths: those are
very different. File is an old class, that represents file or directory
path names, whereas Files was introduced in Java 7 as a utility class
with comprehensive support for IO. The Path interface presents a file or
directory path unit, and defines a useful list of methods. However Paths
is a utility class that offers only two methods - to get construct path
objects</p></li>
<li><p>The file or directory represented by a Path object may not exist.
Other than methods such as toRealPath methods in Path do not require
that the underlying file or directory be present for a Path
object.</p></li>
</ul>
<h2 id="streaming">Streaming</h2>
<p>As already mentioned the Stream API, added in Java 8, can be used
along with the new Files and Path classes from NIO. There are several
new methods in the Files class which produce streams which can then be
used to read file contents or metadata</p>
<h3 id="list">List</h3>
<p>The list method, lists all files or directories in the current
directory, internally it is using <code>DirectoryStream</code>, and
hence the close method must be called to release the IO resources.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Note that the list method returns a stream, but also that stream is one that holds `IO resources` hence the</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">// try-with-resources, which will close the Stream, which in this case is `DirectoryStream` underneath, it is quite smart</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">// actually since `DirectoryStream` itself does not extend Stream, however the iterator of `DirectoryStream` is wrapped around</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">// an anonymous Stream implementation</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span><span class="op">(</span>Stream<span class="op">&lt;</span>Path<span class="op">&gt;</span> entries <span class="op">=</span> Files<span class="op">.</span><span class="fu">list</span><span class="op">(</span>Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">)))</span> <span class="op">{</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    entries<span class="op">.</span><span class="fu">forEach</span><span class="op">(</span><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">::</span>println<span class="op">);</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Also the list method does not do any recursive traversal, just lists
the entries in the current path, there is a recursive version of list,
which is walk, which walks the tree formed by the path passed in as
argument.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// the `FileVisitOption` has one enumeration value - FOLLOW_LINKS, also take note of the second argument in the overloaded</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">// version - `maxDepth`, that is usually useful to take into account when using walk. Note that using FOLLOW_LINKS does not</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">// guarantee that infinite recursion can not occur. The walk method has no built in loop detection. I.e having a symbolic link</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">// somewhere in the tree formed by the current `path` point to a parent directory of `path`</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> Stream<span class="op">&lt;</span>Path<span class="op">&gt;</span> <span class="fu">walk</span><span class="op">(</span>Path path<span class="op">,</span> FileVisitOption<span class="kw">...</span> options<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> Stream<span class="op">&lt;</span>Path<span class="op">&gt;</span> <span class="fu">walk</span><span class="op">(</span>Path path<span class="op">,</span> <span class="dt">int</span> maxDepth<span class="op">,</span> FileVisitOption<span class="kw">...</span> options<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span></span></code></pre></div>
<p>Here is a simple usage, which walks the current directory, along with
symbolic links, as well as restricting the depth to a maximum of 4
levels or directories deep.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span><span class="op">(</span>Stream<span class="op">&lt;</span>Path<span class="op">&gt;</span> entries <span class="op">=</span> Files<span class="op">.</span><span class="fu">walk</span><span class="op">(</span>Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">),</span> <span class="dv">4</span><span class="op">,</span> FileVisitOption<span class="op">.</span><span class="fu">FOLLOW_LINKS</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> numOfEntries <span class="op">=</span> entries<span class="op">.</span><span class="fu">count</span><span class="op">();</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">printf</span><span class="op">(</span><span class="st">&quot;Found </span><span class="sc">%d</span><span class="st"> entries in the current path&quot;</span><span class="op">,</span> numOfEntries<span class="op">);</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="find">Find</h3>
<p>The find method is used to locate a file, somewhere in the current
directory tree formed by the <code>path</code> argument. Find is built
off off walk, it does essentially the same operations, as walk, with the
only difference being that only the files that match the predicate are
returned by the stream. It is effectively like applying a filter stream
operation to <code>walk</code>, however it is much more efficient, the
method signature of find matches the walk method too</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">// return a Stream that is lazily populated with Path by searching for files in a file tree rooted at a given</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">// starting file. This method walks the file tree in exactly the manner specified by  the #walk walk method. For</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">// each file encountered, the given BiPredicate is invoked with its Path and BasicFileAttributes. The Path object is</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">// obtained as if by</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> Stream<span class="op">&lt;</span>Path<span class="op">&gt;</span> <span class="fu">find</span><span class="op">(</span>Path path<span class="op">,</span> FileVisitOption<span class="kw">...</span> options<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> Stream<span class="op">&lt;</span>Path<span class="op">&gt;</span> <span class="fu">find</span><span class="op">(</span>Path path<span class="op">,</span> <span class="dt">int</span> maxDepth<span class="op">,</span> FileVisitOption<span class="kw">...</span> options<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span></span></code></pre></div>
<h3 id="lines">Lines</h3>
<p>There is a way to also obtain the lines from a file, using the
<code>lines</code> or <code>readAllLines</code> methods. Both are
slightly different as <code>lines</code> will return a
<code>Stream&lt;String&gt;</code>, which internally is an anonymous
implementation that wraps around the NIO operations, the stream can then
be used to read the lines lazily. Meaning that depending on the type of
operation (findFirst, findAny, etc) there might be a case where not the
entire file is read, or for example only parts of the file is read (say
first N number of lines, then the stream is closed, which closes the
internal file resources held by it). The <code>readAllLines</code>
however is different it eagerly reads the entire file and all of the
lines in the file and returns a <code>List&lt;String&gt;</code></p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Obtain a stream object to the lines of the file pointed by path, note that the returned Stream, is internally</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">// anonymous implementation which wraps the file resource and IO operations to obtain the lines lazily while and when the</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">// stream is being iterated over. This can prove more efficient depending on what operations are applied on the Stream, the</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">// example below is however not ideal case, since it goes through the entire file and prints all lines. However that</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">// might not be always the case. Internally the Files.lines is using `BufferedReader.lines` (which returns a stream)</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span><span class="op">(</span>Stream<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> lines <span class="op">=</span> Files<span class="op">.</span><span class="fu">lines</span><span class="op">(</span>Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span>filePath<span class="op">)))</span> <span class="op">{</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    lines<span class="op">.</span><span class="fu">forEach</span><span class="op">(</span><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">::</span>println<span class="op">);</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">IOException</span> ioe<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">err</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;IOException occurred when reading the file... exiting&quot;</span><span class="op">);</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">exit</span><span class="op">(-</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="summary">Summary</h1>
<p>Path interface &amp; operations</p>
<ul>
<li><p>A Path object is a programming abstraction to represent the path
of a file/directory.</p></li>
<li><p>You can get an instance of Path using the <code>get()</code>
method of the Paths class.</p></li>
<li><p>Path provides two methods to compare Path objects:
<code>equals()</code> and <code>compareTo()</code>. Even if two Path
objects point to the same file/directory, the <code>equals()</code>
method is not guaranteed to return true.</p></li>
</ul>
<p>Read, delete, copy, move, manage <code>metadata</code></p>
<ul>
<li><p>You can check the existence of a file using the
<code>exists()</code> method of the Files class.</p></li>
<li><p>The Files class provides the methods <code>isReadable()</code>,
<code>isWritable()</code>, and <code>isExecutable()</code> to check the
ability of the program to read, write, and execute programmatically,
respectively.</p></li>
<li><p>You can retrieve the attributes of a file using the
<code>getAttributes()</code> method.</p></li>
<li><p>You can use the <code>readAttributes()</code> method of the Files
class to read file attributes in bulk.</p></li>
<li><p>The <code>copy()</code> method can be used to copy a file from
one location to another. Similarly, the <code>move()</code> method moves
a file from one location to another.</p></li>
<li><p>While copying, all the directories (except the last one, if you
are copying a directory) on the specified path must exist to avoid a
<code>NoSuchFileException</code>.</p></li>
<li><p>Use the <code>delete()</code> method to delete a file; use the
<code>deleteIfExists()</code> method to delete a file only if it
exists.</p></li>
</ul>
<p>Stream &amp; NIO.2</p>
<ul>
<li><p>The Files.<code>list()</code> method returns a
<code>Stream&lt;Path&gt;</code>. It does not recursively traverse the
directories in the given Path.</p></li>
<li><p>The Files.<code>walk()</code> method returns a
<code>Stream&lt;Path&gt;</code> by recursively traversing the entries
from the given Path; in one of its overloaded versions, you can also
pass the maximum depth for such traversal and provide
<code>FileVisitOption.FOLLOW_LINKS</code> as the third option.</p></li>
<li><p>The Files.<code>find()</code> method returns a
<code>Stream&lt;Path&gt;</code> by recursively traversing the entries
from the given Path; it also takes the maximum depth to search, a
<code>BiPredicate</code>, and an optional <code>FileVisitOption</code>
as arguments.</p></li>
<li><p>Files.<code>lines()</code> is a very convenient method to read
the contents of a file. It returns a
<code>Stream&lt;String&gt;</code>.</p></li>
</ul>
</body>
</html>
