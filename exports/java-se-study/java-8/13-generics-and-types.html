<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>13-generics-and-types</title>
  <style>
    html {
      font-size: 12pt;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  \usepackage{listings}
  \usepackage{xcolor}

  \lstset{
      basicstyle=\ttfamily,
      backgroundcolor=\color{black!10},
      showspaces=false,
      showstringspaces=false,
      showtabs=false,
      tabsize=2,
      captionpos=b,
      breaklines=true,
      breakautoindent=true,
      linewidth=\textwidth
  }
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#generics" id="toc-generics">Generics</a>
<ul>
<li><a href="#erasure" id="toc-erasure">Erasure</a></li>
<li><a href="#ambiguity" id="toc-ambiguity">Ambiguity</a></li>
<li><a href="#bounded" id="toc-bounded">Bounded</a></li>
<li><a href="#unbound" id="toc-unbound">Unbound</a></li>
<li><a href="#methods" id="toc-methods">Methods</a></li>
<li><a href="#constructors" id="toc-constructors">Constructors</a></li>
<li><a href="#inheritance" id="toc-inheritance">Inheritance</a></li>
<li><a href="#rawtypes" id="toc-rawtypes">Rawtypes</a></li>
<li><a href="#inference" id="toc-inference">Inference</a></li>
<li><a href="#restrictions" id="toc-restrictions">Restrictions</a></li>
</ul></li>
</ul>
</nav>
<h2 id="generics">Generics</h2>
<p>Generic are a way to provide a compile time type safe parametrization
and generalization of a set of algorithms, In the past to achieve
generic behavior in java, one could use the Object type, however that is
not safe, it requires type casts and is generally error prone, errors
that can be usually only captured at runtime. The generics in java have
the following syntax <code>&lt;T&gt;</code> every parameter enclosed in
angle brackets is called a <code>type parameter</code> - since its a
parameter and it represents a type.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Generic<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// then one ca n use T to reference the type in internal class members</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> T value<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">method</span><span class="op">(</span>T input<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> T <span class="fu">compute</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><code>Generics work only with reference types, on other words one can not create a generic or define a generic class that uses primitives, further more generics can not be assigned willy nilly - one can not assign variable references that point to two different genericly paramterized types - Generic&lt;Integer&gt; != Generic&lt;Double&gt;. The type parameter defined in the generic is part of the class definition in a way</code></p>
<h3 id="erasure">Erasure</h3>
<p>Remember, there is no generic type information available at run time,
all information about the type of a generic is erased at runtime,
meaning that one can not obtain information about the class type of a
generic,</p>
<p>An important constraint that governed the way that generics were
added to Java was the need for compatibility with previous versions of
Java. Simply put, generic code had to be compatible with preexisting,
non-generic code. Thus, any changes to the syntax of the Java language,
or to the JVM, had to avoid breaking older code. The way Java implements
generics while satisfying this constraint is through the use of erasure.
In general, here is how erasure works.</p>
<p><code>When your Java code is compiled, all generic type information is removed (erased). This means replacing type parameters with their bound type, which is Object if no explicit bound is specified, and then applying the appropriate casts (as determined by the type arguments) to maintain type compatibility with the types specified by the type arguments. The compiler also enforces this type compatibility. This approach to generics means that no type parameters exist at run time. They are simply a source-code mechanism.</code></p>
<h3 id="ambiguity">Ambiguity</h3>
<p>This occurs because of the already mentioned process of type erasure,
where two seemingly unrelated types resolve to the same underlying
object, in the example below, one can define an instance of the Generic
class which causes a compilation error</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Generic<span class="op">&lt;</span>T<span class="op">,</span> V<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> voi <span class="fu">set</span><span class="op">(</span>V o<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> voi <span class="fu">set</span><span class="op">(</span>T o<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>Generic<span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> obj <span class="op">=</span> <span class="kw">new</span> Generic<span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;();</span> <span class="co">// consider what would happen here, the Generic class will have two methods called `set` which both have the same type of parameter - String</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>Generic<span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Integer</span><span class="op">&gt;</span> obj <span class="op">=</span> <span class="kw">new</span> Generic<span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Integer</span><span class="op">&gt;();</span> <span class="co">// this however is perfectly valid, there is no overlap between the two objects, meaning that the `set` method will be overloaded just fine</span></span></code></pre></div>
<p>The example above, will cause a compile time error since we are not
allowed to overload methods like that, they are identical, due to the
way the generics are specified, this is something to keep in mind, had
we provided bounding restrictions, where T and V are deriving off of
different type hierarchies, then that problem can never occur.</p>
<h3 id="bounded">Bounded</h3>
<p>Generics are mostly useful when more information is given to the
compiler, one can imagine that in the example above having T defined
alone as a type parameter is not very useful, because the type
<code>T</code> is way too generic, there are not many methods one can
invoke on that type, besides the one defined in Object class type.
However in java one can specify the base or boundary of a generic,
meaning that the compiler now has more information on which type of type
parameter this generic class will be working on</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Sum<span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Number</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> T<span class="op">[]</span> numbers<span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">sum</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span><span class="op">(</span>T num<span class="op">:</span> numbers<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">+=</span> num<span class="op">.</span><span class="fu">integerValue</span><span class="op">();</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>With the example above, one can see how providing a specialization
for the generic, telling the compiler the generic type is of type
Number, which exposes a given interface, in this case
<code>integerValue</code>, one can use this generic class to sum any
type of numbers -
<code>Sum&lt;Double&gt; or Sum&lt;Integer&gt; or Sum&lt;Short&gt; etc</code></p>
<h3 id="unbound">Unbound</h3>
<p>There are situations where a generic class might want to take
advantage of another generic class, which is also parametrized, however
unless the other class’ type parameter is the same as the one in the
main class, one can run into problems. Java provides a way to specify a
usage of a generic class without providing the type or using a
wildcard</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Sum<span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Number</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> T number<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// provide an unbound unknown type parameter in the specialization, allowing the caller to pass any generic object of Sum&lt;&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">compare</span><span class="op">(</span>Sum<span class="op">&lt;?&gt;</span> another<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> number<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>another<span class="op">.</span><span class="fu">number</span><span class="op">);</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// if we had only this method, we would be only able to compare Sum&lt;T&gt; with Sum&lt;T&gt; which while useful, is not generic enough</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">compare</span><span class="op">(</span>Sum<span class="op">&lt;</span>T<span class="op">&gt;</span> another<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> number<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>another<span class="op">.</span><span class="fu">number</span><span class="op">);</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// this is not overloading the method, it is a compile time error, java can not understand and overload generic type parameters</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">compare</span><span class="op">(</span>Sum<span class="op">&lt;</span><span class="bu">Integer</span><span class="op">&gt;</span> another<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> number<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>another<span class="op">.</span><span class="fu">number</span><span class="op">);</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><code>Based on Wildcards in methods alone, the methods can not be overloaded, there is simply not enough information for the compiler to achieve this</code></p>
<p>With the example above, we can compare two Sum objects which have
totally different types, that allows the method in sum to be very
generic while still retaining type safety, since we know that the other
wildcard parameter passed to the function will certainly be extending
off of Number</p>
<p>Wildcards can also be bounded, meaning that an upper or lower
boundary can be placed on what exactly the wildcard represents,</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Base<span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Number</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    T value<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="fu">extract</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">// some implementation</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LevelOne<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="kw">extends</span> Base<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// more members for child one</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LevelTwo<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="kw">extends</span> LevelOne<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// more members for child two</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LevelThree<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="kw">extends</span> LevelTwo<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// more members for child two</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Usage<span class="op">&lt;</span>T <span class="kw">extends</span> Base<span class="op">&lt;</span><span class="bu">Number</span><span class="op">&gt;&gt;</span> <span class="op">{</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> T entry<span class="op">;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>Usage<span class="op">&lt;</span>LevelOne<span class="op">&lt;</span><span class="bu">Number</span><span class="op">&gt;&gt;</span> usageOne<span class="op">;</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>Usage<span class="op">&lt;</span>LevelTwo<span class="op">&lt;</span><span class="bu">Number</span><span class="op">&gt;&gt;</span> usageTwo<span class="op">;</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>Usage<span class="op">&lt;</span>LevelThree<span class="op">&lt;</span><span class="bu">Number</span><span class="op">&gt;&gt;</span> usageThree<span class="op">;</span></span></code></pre></div>
<h4 id="upper-boundary">Upper boundary</h4>
<p>Upper boundary represents the highest class or type in the hierarchy
that can be placed in place of the wildcard, every other child class
derived from that boundary class is also allowed In the example below,
the wildcard represents any derived child class of
<code>LevelTwo</code>, including that class type as well, meaning that
every object that can be replaced with the parent class type LevelTwo
can be a parameter to to the <code>Usage&lt;&gt;</code> parameter the
method.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">int</span> <span class="fu">method</span><span class="op">(</span>Usage<span class="op">&lt;?</span> <span class="kw">extends</span> LevelTwo<span class="op">&gt;</span> elem<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// now one can use any class deriving from the upper boundary of LevelTwo, down to the bottom of the hierarchy - LevelTwo, LevelThree</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="lower-boundary">Lower boundary</h4>
<p>Wildcards can also specify a lower boundary, meaning that the class
specified as boundary is the lowest one in the hierarchy, and every
other one must be a super class of the specified one.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">int</span> <span class="fu">method</span><span class="op">(</span>Usage<span class="op">&lt;?</span> <span class="kw">super</span> LevelTwo<span class="op">&gt;</span> elem<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// now one can use any class starting from the lower boundary of LevelTwo, up to the very base class, Object - LevelTwo, LevelOne, Base and Object</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="methods">Methods</h3>
<p>As already seen methods can be generalized as well as classes, one
can go a step further and have the method be generic without the class
it is being defined in. This gives greater flexibility since the method,
unlike the class is not linked to instance or object directly</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> NoGenericClass <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Comparable</span><span class="op">&lt;</span>T<span class="op">&gt;,</span> V <span class="kw">extends</span> T<span class="op">&gt;</span> <span class="dt">int</span> <span class="fu">inside</span><span class="op">(</span>T value<span class="op">,</span> V<span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// the generic method provides two boundary restrictions, first the Type T must be comparable, and second the type V must be a subclass of T,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">// this implies that V itself is also comparable, however it can be of any type which is comparable, thus one can compare T one type</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">// to V another type as long as both are subclasses and implement comparable</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><code>Note how one can call the function inside() where T and V can be completely different types, for example TypeA and TypeB, and still invoke compareTo since both are guaranteed to be compatible, T extending off of comparable (being a child of comparable) and V extending off of T (being a child of T)</code></p>
<h3 id="constructors">Constructors</h3>
<p>Just as methods, constructors can also be defined generic even if
their enclosing class is not, this provides an easier more flexible way
to initialize the object or construct it from a wide variety of
targets</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> NoGenericClass <span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> value<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Number</span><span class="op">&gt;</span> <span class="fu">NoGenericClass</span><span class="op">(</span>T value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">value</span> <span class="op">=</span> value<span class="op">.</span><span class="fu">doubleValue</span><span class="op">();</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">// can be used to construct the instance with any type of identifier considered to be a number, and due to autoboxing one can use primitives</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>NoGenericClass g1 <span class="op">=</span> <span class="kw">new</span> <span class="fu">NoGenericClass</span><span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>NoGenericClass g2 <span class="op">=</span> <span class="kw">new</span> <span class="fu">NoGenericClass</span><span class="op">(</span><span class="dv">10L</span><span class="op">);</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>NoGenericClass g3 <span class="op">=</span> <span class="kw">new</span> <span class="fu">NoGenericClass</span><span class="op">(</span><span class="fl">5.5f</span><span class="op">);</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>NoGenericClass g4 <span class="op">=</span> <span class="kw">new</span> <span class="fu">NoGenericClass</span><span class="op">(</span><span class="fl">6.5</span><span class="op">);</span></span></code></pre></div>
<p>The example above shows how this class can be instantiated with many
types of <code>Numbers</code> and due to autoboxing one can call it with
primitives too to construct the target instance.</p>
<h3 id="inheritance">Inheritance</h3>
<p>Inheriting or implementing a generic class has one very specific
requirement, that is when a generic class inherits from another, or
implements an interface, the same or more restricted boundaries have to
be specified, for example, below one can see that the type of T is
defined to be strictly a sub-class of <code>Comparable</code>, therefore
all classes which inherit from the interface, must at the very least
specify a boundary that is the same, there is no restriction on
providing a more tight boundary, e.g. in case <code>Comparable</code>
was a <code>superclass</code> of another interface one could specify
that one instead, but not a <code>superclass</code> of
<code>Comparable</code> as a boundary</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> MinMax<span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Comparable</span><span class="op">&lt;</span>T<span class="op">&gt;&gt;</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    T <span class="fu">min</span><span class="op">();</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    T <span class="fu">max</span><span class="op">();</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass<span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Comparable</span><span class="op">&lt;</span>T<span class="op">&gt;&gt;</span> <span class="kw">implements</span> MinMax<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    T<span class="op">[]</span> vals<span class="op">;</span></span></code></pre></div>
<p><code>Note the boundary is the same as in the interface above, that is important, if that is not the case the compiler will produce an error</code></p>
<h3 id="rawtypes">Rawtypes</h3>
<p>To accommodate older code, existing before the age of generics Java
provides a way to specify a generic type without parameters, which will
basically revoke all type safety, and checks, likely forcing the program
to terminate at run-time instead.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>GenericType g1 <span class="op">=</span> <span class="kw">new</span> <span class="fu">GenericType</span><span class="op">();</span> <span class="co">// not an error but the generic type is implicitly converted to Object, the top most class in the java class hierarchy</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>GenericType g2 <span class="op">=</span> <span class="kw">new</span> GenericType<span class="op">&lt;</span><span class="bu">Integer</span><span class="op">&gt;();</span> <span class="co">// this is a compliant definition of a variable which does not omit the type parameter and is safe to use</span></span></code></pre></div>
<h3 id="inference">Inference</h3>
<p><code>MyClass&lt;Integer, String&gt; mcOb = new MyClass&lt;&gt;(98, "A String")</code>
- Notice that the instance creation portion simply uses &lt;&gt;, which
is an empty type argument list. This is referred to as the diamond
operator. It tells the compiler to infer the type arguments needed by
the constructor in the new expression. The principal advantage of this
type-inference syntax is that it shortens what are sometimes quite long
declaration statements.</p>
<h3 id="restrictions">Restrictions</h3>
<ul>
<li><p>Type Parameters Can’t Be Instantiated - this is due to the fact
that the <code>T</code> is just a placeholder, there is no information
for the compiler to know how to instantiate the generic placeholder</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Can&#39;t create an instance of T.</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Gen<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    T ob<span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Gen</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    ob <span class="op">=</span> <span class="kw">new</span> <span class="fu">T</span><span class="op">();</span> <span class="co">// Illegal!!!</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>No static members can be instantiated from the type placeholder
declared in the enclosing class - this is actually a special case of the
restriction above, there is no information for the compile to know how
to construct the static member, since the type place holders are defined
and declared <code>on per instance definition basis</code></p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Wrong<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Wrong, no static variables of type T.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> T ob<span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Wrong, no static method can use T.</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> T <span class="fu">getob</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ob<span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>Creating arrays with generic types is also not possible, there
are two cases shown below which are</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Gen<span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Number</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    T ob<span class="op">;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    T vals<span class="op">[];</span> <span class="co">// OK</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Gen</span><span class="op">(</span>T o<span class="op">,</span> T<span class="op">[]</span> nums<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        vals <span class="op">=</span> <span class="kw">new</span> T<span class="op">[</span><span class="dv">10</span><span class="op">];</span> <span class="co">// compile time error, not enough information on the type to create</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        vals <span class="op">=</span> nums<span class="op">;</span> <span class="co">// can assign reference to existent array</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>Gen<span class="op">&lt;</span><span class="bu">Integer</span><span class="op">&gt;</span> gens<span class="op">[]</span> <span class="op">=</span> <span class="kw">new</span> Gen<span class="op">&lt;</span><span class="bu">Integer</span><span class="op">&gt;[</span><span class="dv">10</span><span class="op">];</span> <span class="co">// compile time error, not enough type information</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>Gen<span class="op">&lt;?&gt;</span> gens<span class="op">[]</span> <span class="op">=</span> <span class="kw">new</span> Gen<span class="op">&lt;?&gt;[</span><span class="dv">10</span><span class="op">];</span> <span class="co">// this however is valid, due to type erasure</span></span></code></pre></div></li>
<li><p>A generic class cannot extend <code>Throwable</code>. This means
that you cannot create generic exception classes.</p></li>
</ul>
</body>
</html>
